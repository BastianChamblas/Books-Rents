-- phpMyAdmin SQL Dump
-- version 5.2.1
-- https://www.phpmyadmin.net/
--
-- Servidor: 127.0.0.1
-- Tiempo de generación: 15-12-2024 a las 00:26:39
-- Versión del servidor: 10.4.32-MariaDB
-- Versión de PHP: 8.2.12

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Base de datos: `dbacapstone`
--

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `admin_interface_theme`
--

CREATE TABLE `admin_interface_theme` (
  `id` int(11) NOT NULL,
  `name` varchar(50) NOT NULL,
  `active` tinyint(1) NOT NULL,
  `title` varchar(50) NOT NULL,
  `title_visible` tinyint(1) NOT NULL,
  `logo` varchar(100) NOT NULL,
  `logo_visible` tinyint(1) NOT NULL,
  `css_header_background_color` varchar(10) NOT NULL,
  `title_color` varchar(10) NOT NULL,
  `css_header_text_color` varchar(10) NOT NULL,
  `css_header_link_color` varchar(10) NOT NULL,
  `css_header_link_hover_color` varchar(10) NOT NULL,
  `css_module_background_color` varchar(10) NOT NULL,
  `css_module_text_color` varchar(10) NOT NULL,
  `css_module_link_color` varchar(10) NOT NULL,
  `css_module_link_hover_color` varchar(10) NOT NULL,
  `css_module_rounded_corners` tinyint(1) NOT NULL,
  `css_generic_link_color` varchar(10) NOT NULL,
  `css_generic_link_hover_color` varchar(10) NOT NULL,
  `css_save_button_background_color` varchar(10) NOT NULL,
  `css_save_button_background_hover_color` varchar(10) NOT NULL,
  `css_save_button_text_color` varchar(10) NOT NULL,
  `css_delete_button_background_color` varchar(10) NOT NULL,
  `css_delete_button_background_hover_color` varchar(10) NOT NULL,
  `css_delete_button_text_color` varchar(10) NOT NULL,
  `list_filter_dropdown` tinyint(1) NOT NULL,
  `related_modal_active` tinyint(1) NOT NULL,
  `related_modal_background_color` varchar(10) NOT NULL,
  `related_modal_rounded_corners` tinyint(1) NOT NULL,
  `logo_color` varchar(10) NOT NULL,
  `recent_actions_visible` tinyint(1) NOT NULL,
  `favicon` varchar(100) NOT NULL,
  `related_modal_background_opacity` varchar(5) NOT NULL,
  `env_name` varchar(50) NOT NULL,
  `env_visible_in_header` tinyint(1) NOT NULL,
  `env_color` varchar(10) NOT NULL,
  `env_visible_in_favicon` tinyint(1) NOT NULL,
  `related_modal_close_button_visible` tinyint(1) NOT NULL,
  `language_chooser_active` tinyint(1) NOT NULL,
  `language_chooser_display` varchar(10) NOT NULL,
  `list_filter_sticky` tinyint(1) NOT NULL,
  `form_pagination_sticky` tinyint(1) NOT NULL,
  `form_submit_sticky` tinyint(1) NOT NULL,
  `css_module_background_selected_color` varchar(10) NOT NULL,
  `css_module_link_selected_color` varchar(10) NOT NULL,
  `logo_max_height` smallint(5) UNSIGNED NOT NULL CHECK (`logo_max_height` >= 0),
  `logo_max_width` smallint(5) UNSIGNED NOT NULL CHECK (`logo_max_width` >= 0),
  `foldable_apps` tinyint(1) NOT NULL,
  `language_chooser_control` varchar(20) NOT NULL,
  `list_filter_highlight` tinyint(1) NOT NULL,
  `list_filter_removal_links` tinyint(1) NOT NULL,
  `show_fieldsets_as_tabs` tinyint(1) NOT NULL,
  `show_inlines_as_tabs` tinyint(1) NOT NULL,
  `css_generic_link_active_color` varchar(10) NOT NULL,
  `collapsible_stacked_inlines` tinyint(1) NOT NULL,
  `collapsible_stacked_inlines_collapsed` tinyint(1) NOT NULL,
  `collapsible_tabular_inlines` tinyint(1) NOT NULL,
  `collapsible_tabular_inlines_collapsed` tinyint(1) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `app_arriendo`
--

CREATE TABLE `app_arriendo` (
  `id` bigint(20) NOT NULL,
  `fecha_inicio` date NOT NULL,
  `fecha_fin` date DEFAULT NULL,
  `arriendo_atraso` tinyint(1) NOT NULL,
  `libro_entregado` tinyint(1) NOT NULL,
  `cliente_id` bigint(20) NOT NULL,
  `producto_id` bigint(20) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `app_arriendo`
--

INSERT INTO `app_arriendo` (`id`, `fecha_inicio`, `fecha_fin`, `arriendo_atraso`, `libro_entregado`, `cliente_id`, `producto_id`) VALUES
(123474, '2024-12-01', '2024-12-10', 0, 1, 2, 12),
(123475, '2024-12-11', '2024-12-20', 1, 0, 2, 12),
(123476, '2024-12-21', '2024-12-30', 0, 1, 2, 12),
(123477, '2024-12-05', '2024-12-15', 1, 0, 2, 12),
(123478, '2024-12-16', '2024-12-25', 0, 1, 2, 12),
(123479, '2024-12-02', '2024-12-12', 0, 1, 2, 13),
(123480, '2024-12-13', '2024-12-22', 1, 0, 2, 13),
(123481, '2024-12-23', '2024-12-31', 0, 1, 2, 13),
(123482, '2024-12-06', '2024-12-16', 1, 0, 2, 13),
(123483, '2024-12-17', '2024-12-26', 0, 1, 2, 13),
(123484, '2024-12-03', '2024-12-13', 0, 1, 2, 14),
(123485, '2024-12-14', '2024-12-23', 1, 0, 2, 14),
(123486, '2024-12-24', '2024-12-31', 0, 1, 2, 14),
(123487, '2024-12-07', '2024-12-17', 1, 0, 2, 14),
(123488, '2024-12-18', '2024-12-27', 0, 1, 2, 14),
(123489, '2024-12-04', '2024-12-14', 0, 1, 2, 15),
(123490, '2024-12-15', '2024-12-24', 1, 0, 2, 15),
(123491, '2024-12-25', '2024-12-31', 0, 1, 2, 15),
(123492, '2024-12-08', '2024-12-18', 1, 0, 2, 15),
(123493, '2024-12-19', '2024-12-28', 0, 1, 2, 15),
(123494, '2024-12-01', '2024-12-05', 0, 1, 2, 16),
(123495, '2024-12-02', '2024-12-06', 1, 0, 2, 16),
(123496, '2024-12-03', '2024-12-07', 0, 1, 2, 16),
(123497, '2024-12-04', '2024-12-08', 1, 0, 2, 16),
(123498, '2024-12-05', '2024-12-09', 0, 1, 2, 16),
(123499, '2024-12-06', '2024-12-10', 1, 0, 2, 16),
(123500, '2024-12-07', '2024-12-11', 0, 1, 2, 16),
(123501, '2024-12-08', '2024-12-12', 1, 0, 2, 16),
(123502, '2024-12-09', '2024-12-13', 0, 1, 2, 16),
(123503, '2024-12-10', '2024-12-14', 1, 0, 2, 16),
(123504, '2024-12-11', '2024-12-15', 0, 1, 2, 16),
(123505, '2024-12-12', '2024-12-16', 1, 0, 2, 16),
(123506, '2024-12-13', '2024-12-17', 0, 1, 2, 16),
(123507, '2024-12-14', '2024-12-18', 1, 0, 2, 16),
(123508, '2024-12-15', '2024-12-19', 0, 1, 2, 16),
(123509, '2024-12-01', '2024-12-05', 0, 1, 2, 17),
(123510, '2024-12-02', '2024-12-06', 1, 0, 2, 17),
(123511, '2024-12-03', '2024-12-07', 0, 1, 2, 17),
(123512, '2024-12-04', '2024-12-08', 1, 0, 2, 17),
(123513, '2024-12-05', '2024-12-09', 0, 1, 2, 17),
(123514, '2024-12-06', '2024-12-10', 1, 0, 2, 17),
(123515, '2024-12-07', '2024-12-11', 0, 1, 2, 17),
(123516, '2024-12-08', '2024-12-12', 1, 0, 2, 17),
(123517, '2024-12-09', '2024-12-13', 0, 1, 2, 17),
(123518, '2024-12-10', '2024-12-14', 1, 0, 2, 17),
(123519, '2024-12-11', '2024-12-15', 0, 1, 2, 17),
(123520, '2024-12-12', '2024-12-16', 1, 0, 2, 17),
(123521, '2024-12-13', '2024-12-17', 0, 1, 2, 17),
(123522, '2024-12-14', '2024-12-18', 1, 0, 2, 17),
(123523, '2024-12-15', '2024-12-19', 0, 1, 2, 17),
(123524, '2024-12-16', '2024-12-20', 1, 0, 2, 17),
(123525, '2024-12-17', '2024-12-21', 0, 1, 2, 17),
(123526, '2024-12-18', '2024-12-22', 1, 0, 2, 17),
(123527, '2024-12-19', '2024-12-23', 0, 1, 2, 17),
(123528, '2024-12-20', '2024-12-24', 1, 0, 2, 17),
(123529, '2024-12-21', '2024-12-25', 0, 1, 2, 17),
(123530, '2024-12-22', '2024-12-26', 1, 0, 2, 17),
(123531, '2024-12-23', '2024-12-27', 0, 1, 2, 17),
(123532, '2024-12-24', '2024-12-28', 1, 0, 2, 17),
(123533, '2024-12-25', '2024-12-29', 0, 1, 2, 17),
(123534, '2024-12-01', '2024-12-05', 0, 1, 2, 18),
(123535, '2024-12-02', '2024-12-06', 1, 0, 2, 18),
(123536, '2024-12-03', '2024-12-07', 0, 1, 2, 18),
(123537, '2024-12-04', '2024-12-08', 1, 0, 2, 18),
(123538, '2024-12-05', '2024-12-09', 0, 1, 2, 18),
(123539, '2024-12-06', '2024-12-10', 1, 0, 2, 18),
(123540, '2024-12-07', '2024-12-11', 0, 1, 2, 18),
(123541, '2024-12-08', '2024-12-12', 1, 0, 2, 18),
(123542, '2024-12-09', '2024-12-13', 0, 1, 2, 18),
(123543, '2024-12-10', '2024-12-14', 1, 0, 2, 18),
(123544, '2024-12-11', '2024-12-15', 0, 1, 2, 18),
(123545, '2024-12-12', '2024-12-16', 1, 0, 2, 18),
(123546, '2024-12-13', '2024-12-17', 0, 1, 2, 18),
(123547, '2024-12-14', '2024-12-18', 1, 0, 2, 18),
(123548, '2024-12-15', '2024-12-19', 0, 1, 2, 18),
(123549, '2024-12-16', '2024-12-20', 1, 0, 2, 18),
(123550, '2024-12-17', '2024-12-21', 0, 1, 2, 18),
(123551, '2024-12-18', '2024-12-22', 1, 0, 2, 18),
(123552, '2024-12-19', '2024-12-23', 0, 1, 2, 18),
(123553, '2024-12-20', '2024-12-24', 1, 0, 2, 18),
(123554, '2024-12-21', '2024-12-25', 0, 1, 2, 18),
(123555, '2024-12-22', '2024-12-26', 1, 0, 2, 18),
(123556, '2024-12-23', '2024-12-27', 0, 1, 2, 18),
(123557, '2024-12-24', '2024-12-28', 1, 0, 2, 18),
(123558, '2024-12-25', '2024-12-29', 0, 1, 2, 18),
(123559, '2024-12-26', '2024-12-30', 1, 0, 2, 18),
(123560, '2024-12-27', '2024-12-31', 0, 1, 2, 18),
(123561, '2024-12-01', '2024-12-05', 0, 1, 2, 18),
(123562, '2024-12-02', '2024-12-06', 1, 0, 2, 18),
(123563, '2024-12-03', '2024-12-07', 0, 1, 2, 18),
(123564, '2024-12-04', '2024-12-08', 1, 0, 2, 18),
(123565, '2024-12-05', '2024-12-09', 0, 1, 2, 18),
(123566, '2024-12-06', '2024-12-10', 1, 0, 2, 18),
(123567, '2024-12-07', '2024-12-11', 0, 1, 2, 18),
(123568, '2024-12-08', '2024-12-12', 1, 0, 2, 18),
(123569, '2024-12-09', '2024-12-13', 0, 1, 2, 18),
(123570, '2024-12-10', '2024-12-14', 1, 0, 2, 18),
(123571, '2024-12-11', '2024-12-15', 0, 1, 2, 18),
(123572, '2024-12-12', '2024-12-16', 1, 0, 2, 18),
(123573, '2024-12-13', '2024-12-17', 0, 1, 2, 18),
(123574, '2024-12-14', '2024-12-18', 1, 0, 2, 18),
(123575, '2024-12-15', '2024-12-19', 0, 1, 2, 18),
(123576, '2024-12-16', '2024-12-20', 1, 0, 2, 18),
(123577, '2024-12-17', '2024-12-21', 0, 1, 2, 18),
(123578, '2024-12-18', '2024-12-22', 1, 0, 2, 18),
(123579, '2024-12-19', '2024-12-23', 0, 1, 2, 18),
(123580, '2024-12-20', '2024-12-24', 1, 0, 2, 18),
(123581, '2024-12-21', '2024-12-25', 0, 1, 2, 18),
(123582, '2024-12-22', '2024-12-26', 1, 0, 2, 18),
(123583, '2024-12-23', '2024-12-27', 0, 1, 2, 18),
(123584, '2024-12-24', '2024-12-28', 1, 0, 2, 18),
(123585, '2024-12-25', '2024-12-29', 0, 1, 2, 18),
(123586, '2023-12-01', '2023-12-10', 0, 1, 2, 12),
(123587, '2023-12-11', '2023-12-20', 1, 0, 2, 12),
(123588, '2023-12-21', '2023-12-30', 0, 1, 2, 12),
(123589, '2023-12-05', '2023-12-15', 1, 0, 2, 12),
(123590, '2023-12-16', '2023-12-25', 0, 1, 2, 12),
(123591, '2023-12-02', '2023-12-12', 0, 1, 2, 13),
(123592, '2023-12-13', '2023-12-22', 1, 0, 2, 13),
(123593, '2023-12-23', '2023-12-31', 0, 1, 2, 13),
(123594, '2023-12-06', '2023-12-16', 1, 0, 2, 13),
(123595, '2023-12-17', '2023-12-26', 0, 1, 2, 13),
(123596, '2023-12-03', '2023-12-13', 0, 1, 2, 14),
(123597, '2023-12-14', '2023-12-23', 1, 0, 2, 14),
(123598, '2023-12-24', '2023-12-31', 0, 1, 2, 14),
(123599, '2023-12-07', '2023-12-17', 1, 0, 2, 14),
(123600, '2023-12-18', '2023-12-27', 0, 1, 2, 14),
(123601, '2023-12-04', '2023-12-14', 0, 1, 2, 15),
(123602, '2023-12-15', '2023-12-24', 1, 0, 2, 15),
(123603, '2023-12-25', '2023-12-31', 0, 1, 2, 15),
(123604, '2023-12-08', '2023-12-18', 1, 0, 2, 15),
(123605, '2023-12-19', '2023-12-28', 0, 1, 2, 15),
(123606, '2023-12-01', '2023-12-05', 0, 1, 2, 16),
(123607, '2023-12-02', '2023-12-06', 1, 0, 2, 16),
(123608, '2023-12-03', '2023-12-07', 0, 1, 2, 16),
(123609, '2023-12-04', '2023-12-08', 1, 0, 2, 16),
(123610, '2023-12-05', '2023-12-09', 0, 1, 2, 16),
(123611, '2023-12-06', '2023-12-10', 1, 0, 2, 16),
(123612, '2023-12-07', '2023-12-11', 0, 1, 2, 16),
(123613, '2023-12-08', '2023-12-12', 1, 0, 2, 16),
(123614, '2023-12-09', '2023-12-13', 0, 1, 2, 16),
(123615, '2023-12-10', '2023-12-14', 1, 0, 2, 16),
(123616, '2023-12-11', '2023-12-15', 0, 1, 2, 16),
(123617, '2023-12-12', '2023-12-16', 1, 0, 2, 16),
(123618, '2023-12-13', '2023-12-17', 0, 1, 2, 16),
(123619, '2023-12-14', '2023-12-18', 1, 0, 2, 16),
(123620, '2023-12-15', '2023-12-19', 0, 1, 2, 16),
(123621, '2023-12-01', '2023-12-05', 0, 1, 2, 17),
(123622, '2023-12-02', '2023-12-06', 1, 0, 2, 17),
(123623, '2023-12-03', '2023-12-07', 0, 1, 2, 17),
(123624, '2023-12-04', '2023-12-08', 1, 0, 2, 17),
(123625, '2023-12-05', '2023-12-09', 0, 1, 2, 17),
(123626, '2023-12-06', '2023-12-10', 1, 0, 2, 17),
(123627, '2023-12-07', '2023-12-11', 0, 1, 2, 17),
(123628, '2023-12-08', '2023-12-12', 1, 0, 2, 17),
(123629, '2023-12-09', '2023-12-13', 0, 1, 2, 17),
(123630, '2023-12-10', '2023-12-14', 1, 0, 2, 17),
(123631, '2023-12-11', '2023-12-15', 0, 1, 2, 17),
(123632, '2023-12-12', '2023-12-16', 1, 0, 2, 17),
(123633, '2023-12-13', '2023-12-17', 0, 1, 2, 17),
(123634, '2023-12-14', '2023-12-18', 1, 0, 2, 17),
(123635, '2023-12-15', '2023-12-19', 0, 1, 2, 17),
(123636, '2023-12-16', '2023-12-20', 1, 0, 2, 17),
(123637, '2023-12-17', '2023-12-21', 0, 1, 2, 17),
(123638, '2023-12-18', '2023-12-22', 1, 0, 2, 17),
(123639, '2023-12-19', '2023-12-23', 0, 1, 2, 17),
(123640, '2023-12-20', '2023-12-24', 1, 0, 2, 17),
(123641, '2023-12-21', '2023-12-25', 0, 1, 2, 17),
(123642, '2023-12-22', '2023-12-26', 1, 0, 2, 17),
(123643, '2023-12-23', '2023-12-27', 0, 1, 2, 17),
(123644, '2023-12-24', '2023-12-28', 1, 0, 2, 17),
(123645, '2023-12-25', '2023-12-29', 0, 1, 2, 17),
(123646, '2023-12-01', '2023-12-05', 0, 1, 2, 18),
(123647, '2023-12-02', '2023-12-06', 1, 0, 2, 18),
(123648, '2023-12-03', '2023-12-07', 0, 1, 2, 18),
(123649, '2023-12-04', '2023-12-08', 1, 0, 2, 18),
(123650, '2023-12-05', '2023-12-09', 0, 1, 2, 18),
(123651, '2023-12-06', '2023-12-10', 1, 0, 2, 18),
(123652, '2023-12-07', '2023-12-11', 0, 1, 2, 18),
(123653, '2023-12-08', '2023-12-12', 1, 0, 2, 18),
(123654, '2023-12-09', '2023-12-13', 0, 1, 2, 18),
(123655, '2023-12-10', '2023-12-14', 1, 0, 2, 18),
(123656, '2023-12-11', '2023-12-15', 0, 1, 2, 18),
(123657, '2023-12-12', '2023-12-16', 1, 0, 2, 18),
(123658, '2023-12-13', '2023-12-17', 0, 1, 2, 18),
(123659, '2023-12-14', '2023-12-18', 1, 0, 2, 18),
(123660, '2023-12-15', '2023-12-19', 0, 1, 2, 18),
(123661, '2023-12-16', '2023-12-20', 1, 0, 2, 18),
(123662, '2023-12-17', '2023-12-21', 0, 1, 2, 18),
(123663, '2023-12-18', '2023-12-22', 1, 0, 2, 18),
(123664, '2023-12-19', '2023-12-23', 0, 1, 2, 18),
(123665, '2023-12-20', '2023-12-24', 1, 0, 2, 18),
(123666, '2023-12-21', '2023-12-25', 0, 1, 2, 18),
(123667, '2023-12-22', '2023-12-26', 1, 0, 2, 18),
(123668, '2023-12-23', '2023-12-27', 0, 1, 2, 18),
(123669, '2023-12-24', '2023-12-28', 1, 0, 2, 18),
(123670, '2023-12-25', '2023-12-29', 0, 1, 2, 18),
(123671, '2023-12-26', '2023-12-30', 1, 0, 2, 18),
(123672, '2023-12-27', '2023-12-31', 0, 1, 2, 18),
(123673, '2023-12-28', '0000-00-00', 1, 0, 2, 18),
(123674, '2023-12-29', '0000-00-00', 0, 1, 2, 18),
(123675, '2023-12-30', '0000-00-00', 1, 0, 2, 18),
(123676, '2023-12-31', '2024-01-04', 0, 1, 2, 18),
(123677, '2023-12-01', '2023-12-05', 0, 1, 2, 18),
(123678, '2023-12-02', '2023-12-06', 1, 0, 2, 18),
(123679, '2023-12-03', '2023-12-07', 0, 1, 2, 18),
(123680, '2023-12-04', '2023-12-08', 1, 0, 2, 18),
(123681, '2023-12-05', '2023-12-09', 0, 1, 2, 18),
(123682, '2023-12-06', '2023-12-10', 1, 0, 2, 18),
(123683, '2023-12-07', '2023-12-11', 0, 1, 2, 18),
(123684, '2023-12-08', '2023-12-12', 1, 0, 2, 18),
(123685, '2023-12-09', '2023-12-13', 0, 1, 2, 18),
(123686, '2023-12-10', '2023-12-14', 1, 0, 2, 18),
(123687, '2023-12-11', '2023-12-15', 0, 1, 2, 18),
(123688, '2023-12-12', '2023-12-16', 1, 0, 2, 18),
(123689, '2023-12-13', '2023-12-17', 0, 1, 2, 18),
(123690, '2023-12-14', '2023-12-18', 1, 0, 2, 18),
(123691, '2023-12-15', '2023-12-19', 0, 1, 2, 18),
(123692, '2023-12-16', '2023-12-20', 1, 0, 2, 18),
(123693, '2023-12-17', '2023-12-21', 0, 1, 2, 18),
(123694, '2023-12-18', '2023-12-22', 1, 0, 2, 18),
(123695, '2023-12-19', '2023-12-23', 0, 1, 2, 18),
(123696, '2023-12-20', '2023-12-24', 1, 0, 2, 18),
(123697, '2023-12-21', '2023-12-25', 0, 1, 2, 18),
(123698, '2023-12-22', '2023-12-26', 1, 0, 2, 18),
(123699, '2023-12-23', '2023-12-27', 0, 1, 2, 18),
(123700, '2023-12-24', '2023-12-28', 1, 0, 2, 18),
(123701, '2023-12-25', '2023-12-29', 0, 1, 2, 18),
(123702, '2023-01-03', '2023-01-13', 0, 1, 2, 12),
(123703, '2023-01-07', '2023-01-17', 1, 0, 2, 14),
(123704, '2023-01-10', '2023-01-20', 0, 1, 2, 16),
(123705, '2023-01-15', '2023-01-25', 1, 0, 2, 18),
(123706, '2023-01-20', '2023-01-30', 0, 1, 2, 20),
(123707, '2023-01-22', '2023-02-01', 1, 0, 2, 21),
(123708, '2023-01-25', '2023-02-04', 0, 1, 2, 17),
(123709, '2023-01-28', '2023-02-07', 1, 0, 2, 19),
(123710, '2023-01-30', '2023-02-09', 0, 1, 2, 15),
(123711, '2023-01-31', '2023-02-10', 1, 0, 2, 13),
(123712, '2023-02-01', '2023-02-11', 0, 1, 2, 14),
(123713, '2023-02-04', '2023-02-14', 1, 0, 2, 16),
(123714, '2023-02-07', '2023-02-17', 0, 1, 2, 18),
(123715, '2023-02-10', '2023-02-20', 1, 0, 2, 12),
(123716, '2023-02-13', '2023-02-23', 0, 1, 2, 19),
(123717, '2023-02-16', '2023-02-26', 1, 0, 2, 20),
(123718, '2023-02-19', '2023-03-01', 0, 1, 2, 21),
(123719, '2023-02-22', '2023-03-02', 1, 0, 2, 13),
(123720, '2023-02-25', '2023-03-05', 0, 1, 2, 17),
(123721, '2023-02-28', '2023-03-08', 1, 0, 2, 15),
(123722, '2023-03-02', '2023-03-12', 0, 1, 2, 12),
(123723, '2023-03-05', '2023-03-15', 1, 0, 2, 14),
(123724, '2023-03-09', '2023-03-19', 0, 1, 2, 16),
(123725, '2023-03-12', '2023-03-22', 1, 0, 2, 17),
(123726, '2023-03-15', '2023-03-25', 0, 1, 2, 18),
(123727, '2023-03-18', '2023-03-28', 1, 0, 2, 19),
(123728, '2023-03-21', '2023-03-31', 0, 1, 2, 20),
(123729, '2023-03-24', '2023-04-03', 1, 0, 2, 21),
(123730, '2023-03-27', '2023-04-06', 0, 1, 2, 15),
(123731, '2023-03-30', '2023-04-09', 1, 0, 2, 13),
(123732, '2023-04-01', '2023-04-11', 0, 1, 2, 16),
(123733, '2023-04-04', '2023-04-14', 1, 0, 2, 18),
(123734, '2023-04-07', '2023-04-17', 0, 1, 2, 12),
(123735, '2023-04-10', '2023-04-20', 1, 0, 2, 14),
(123736, '2023-04-13', '2023-04-23', 0, 1, 2, 19),
(123737, '2023-04-16', '2023-04-26', 1, 0, 2, 20),
(123738, '2023-04-19', '2023-05-01', 0, 1, 2, 21),
(123739, '2023-04-22', '2023-05-02', 1, 0, 2, 13),
(123740, '2023-04-25', '2023-05-05', 0, 1, 2, 17),
(123741, '2023-04-28', '2023-05-08', 1, 0, 2, 15),
(123742, '2023-05-02', '2023-05-12', 0, 1, 2, 12),
(123743, '2023-05-05', '2023-05-15', 1, 0, 2, 14),
(123744, '2023-05-08', '2023-05-18', 0, 1, 2, 16),
(123745, '2023-05-11', '2023-05-21', 1, 0, 2, 17),
(123746, '2023-05-14', '2023-05-24', 0, 1, 2, 18),
(123747, '2023-05-17', '2023-05-27', 1, 0, 2, 19),
(123748, '2023-05-20', '2023-05-30', 0, 1, 2, 20),
(123749, '2023-05-23', '2023-06-02', 1, 0, 2, 21),
(123750, '2023-05-26', '2023-06-05', 0, 1, 2, 15),
(123751, '2023-05-29', '2023-06-08', 1, 0, 2, 13),
(123752, '2023-06-01', '2023-06-11', 0, 1, 2, 14),
(123753, '2023-06-04', '2023-06-14', 1, 0, 2, 16),
(123754, '2023-06-07', '2023-06-17', 0, 1, 2, 18),
(123755, '2023-06-10', '2023-06-20', 1, 0, 2, 12),
(123756, '2023-06-13', '2023-06-23', 0, 1, 2, 19),
(123757, '2023-06-16', '2023-06-26', 1, 0, 2, 20),
(123758, '2023-06-19', '2023-07-01', 0, 1, 2, 21),
(123759, '2023-06-22', '2023-07-02', 1, 0, 2, 13),
(123760, '2023-06-25', '2023-07-05', 0, 1, 2, 17),
(123761, '2023-06-28', '2023-07-08', 1, 0, 2, 15),
(123762, '2023-07-01', '2023-07-11', 0, 1, 2, 12),
(123763, '2023-07-04', '2023-07-14', 1, 0, 2, 14),
(123764, '2023-07-07', '2023-07-17', 0, 1, 2, 16),
(123765, '2023-07-10', '2023-07-20', 1, 0, 2, 17),
(123766, '2023-07-13', '2023-07-23', 0, 1, 2, 18),
(123767, '2023-07-16', '2023-07-26', 1, 0, 2, 19),
(123768, '2023-07-19', '2023-07-29', 0, 1, 2, 20),
(123769, '2023-07-22', '2023-08-01', 1, 0, 2, 21),
(123770, '2023-07-25', '2023-08-05', 0, 1, 2, 15),
(123771, '2023-07-28', '2023-08-07', 1, 0, 2, 13),
(123772, '2023-08-01', '2023-08-11', 0, 1, 2, 14),
(123773, '2023-08-04', '2023-08-14', 1, 0, 2, 16),
(123774, '2023-08-07', '2023-08-17', 0, 1, 2, 18),
(123775, '2023-08-10', '2023-08-20', 1, 0, 2, 12),
(123776, '2023-08-13', '2023-08-23', 0, 1, 2, 19),
(123777, '2023-08-16', '2023-08-26', 1, 0, 2, 20),
(123778, '2023-08-19', '2023-08-29', 0, 1, 2, 21),
(123779, '2023-08-22', '2023-09-01', 1, 0, 2, 13),
(123780, '2023-08-25', '2023-09-05', 0, 1, 2, 17),
(123781, '2023-08-28', '2023-09-07', 1, 0, 2, 15),
(123782, '2023-09-01', '2023-09-11', 0, 1, 2, 12),
(123783, '2023-09-04', '2023-09-14', 1, 0, 2, 14),
(123784, '2023-09-07', '2023-09-17', 0, 1, 2, 16),
(123785, '2023-09-10', '2023-09-20', 1, 0, 2, 17),
(123786, '2023-09-13', '2023-09-23', 0, 1, 2, 18),
(123787, '2023-09-16', '2023-09-26', 1, 0, 2, 19),
(123788, '2023-09-19', '2023-09-29', 0, 1, 2, 20),
(123789, '2023-09-22', '2023-10-02', 1, 0, 2, 21),
(123790, '2023-09-25', '2023-10-05', 0, 1, 2, 15),
(123791, '2023-09-28', '2023-10-07', 1, 0, 2, 13),
(123792, '2023-10-01', '2023-10-11', 0, 1, 2, 14),
(123793, '2023-10-04', '2023-10-14', 1, 0, 2, 16),
(123794, '2023-10-07', '2023-10-17', 0, 1, 2, 18),
(123795, '2023-10-10', '2023-10-20', 1, 0, 2, 12),
(123796, '2023-10-13', '2023-10-23', 0, 1, 2, 19),
(123797, '2023-10-16', '2023-10-26', 1, 0, 2, 20),
(123798, '2023-10-19', '2023-10-29', 0, 1, 2, 21),
(123799, '2023-10-22', '2023-11-01', 1, 0, 2, 13),
(123800, '2023-10-25', '2023-11-05', 0, 1, 2, 17),
(123801, '2023-10-28', '2023-11-07', 1, 0, 2, 15),
(123802, '2023-11-01', '2023-11-11', 0, 1, 2, 12),
(123803, '2023-11-04', '2023-11-14', 1, 0, 2, 14),
(123804, '2023-11-07', '2023-11-17', 0, 1, 2, 16),
(123805, '2023-11-10', '2023-11-20', 1, 0, 2, 17),
(123806, '2023-11-13', '2023-11-23', 0, 1, 2, 18),
(123807, '2023-11-16', '2023-11-26', 1, 0, 2, 19),
(123808, '2023-11-19', '2023-11-29', 0, 1, 2, 20),
(123809, '2023-11-22', '2023-12-02', 1, 0, 2, 21),
(123810, '2023-11-25', '2023-12-05', 0, 1, 2, 15),
(123811, '2023-11-28', '2023-12-07', 1, 0, 2, 13),
(123812, '2024-01-01', '2024-01-11', 0, 1, 2, 12),
(123813, '2024-01-04', '2024-01-14', 1, 0, 2, 14),
(123814, '2024-01-07', '2024-01-17', 0, 1, 2, 16),
(123815, '2024-01-10', '2024-01-20', 1, 0, 2, 17),
(123816, '2024-01-13', '2024-01-23', 0, 1, 2, 18),
(123817, '2024-01-16', '2024-01-26', 1, 0, 2, 19),
(123818, '2024-01-19', '2024-01-29', 0, 1, 2, 20),
(123819, '2024-01-22', '2024-02-01', 1, 0, 2, 21),
(123820, '2024-01-25', '2024-02-04', 0, 1, 2, 15),
(123821, '2024-01-28', '2024-02-07', 1, 0, 2, 13),
(123822, '2024-02-01', '2024-02-11', 0, 1, 2, 14),
(123823, '2024-02-04', '2024-02-14', 1, 0, 2, 16),
(123824, '2024-02-07', '2024-02-17', 0, 1, 2, 18),
(123825, '2024-02-10', '2024-02-20', 1, 0, 2, 12),
(123826, '2024-02-13', '2024-02-23', 0, 1, 2, 19),
(123827, '2024-02-16', '2024-02-26', 1, 0, 2, 20),
(123828, '2024-02-19', '2024-03-01', 0, 1, 2, 21),
(123829, '2024-02-22', '2024-03-02', 1, 0, 2, 13),
(123830, '2024-02-25', '2024-03-05', 0, 1, 2, 17),
(123831, '2024-02-28', '2024-03-08', 1, 0, 2, 15),
(123832, '2024-03-01', '2024-03-11', 0, 1, 2, 12),
(123833, '2024-03-04', '2024-03-14', 1, 0, 2, 14),
(123834, '2024-03-07', '2024-03-17', 0, 1, 2, 16),
(123835, '2024-03-10', '2024-03-20', 1, 0, 2, 17),
(123836, '2024-03-13', '2024-03-23', 0, 1, 2, 18),
(123837, '2024-03-16', '2024-03-26', 1, 0, 2, 19),
(123838, '2024-03-19', '2024-03-29', 0, 1, 2, 20),
(123839, '2024-03-22', '2024-04-01', 1, 0, 2, 21),
(123840, '2024-03-25', '2024-04-04', 0, 1, 2, 15),
(123841, '2024-03-28', '2024-04-07', 1, 0, 2, 13),
(123842, '2024-04-01', '2024-04-11', 0, 1, 2, 14),
(123843, '2024-04-04', '2024-04-14', 1, 0, 2, 16),
(123844, '2024-04-07', '2024-04-17', 0, 1, 2, 18),
(123845, '2024-04-10', '2024-04-20', 1, 0, 2, 12),
(123846, '2024-04-13', '2024-04-23', 0, 1, 2, 19),
(123847, '2024-04-16', '2024-04-26', 1, 0, 2, 20),
(123848, '2024-04-19', '2024-05-01', 0, 1, 2, 21),
(123849, '2024-04-22', '2024-05-02', 1, 0, 2, 13),
(123850, '2024-04-25', '2024-05-05', 0, 1, 2, 17),
(123851, '2024-04-28', '2024-05-08', 1, 0, 2, 15),
(123852, '2024-05-01', '2024-05-11', 0, 1, 2, 12),
(123853, '2024-05-04', '2024-05-14', 1, 0, 2, 14),
(123854, '2024-05-07', '2024-05-17', 0, 1, 2, 16),
(123855, '2024-05-10', '2024-05-20', 1, 0, 2, 17),
(123856, '2024-05-13', '2024-05-23', 0, 1, 2, 18),
(123857, '2024-05-16', '2024-05-26', 1, 0, 2, 19),
(123858, '2024-05-19', '2024-05-29', 0, 1, 2, 20),
(123859, '2024-05-22', '2024-06-01', 1, 0, 2, 21),
(123860, '2024-05-25', '2024-06-05', 0, 1, 2, 15),
(123861, '2024-05-28', '2024-06-07', 1, 0, 2, 13),
(123862, '2024-06-01', '2024-06-11', 0, 1, 2, 14),
(123863, '2024-06-04', '2024-06-14', 1, 0, 2, 16),
(123864, '2024-06-07', '2024-06-17', 0, 1, 2, 18),
(123865, '2024-06-10', '2024-06-20', 1, 0, 2, 12),
(123866, '2024-06-13', '2024-06-23', 0, 1, 2, 19),
(123867, '2024-06-16', '2024-06-26', 1, 0, 2, 20),
(123868, '2024-06-19', '2024-07-01', 0, 1, 2, 21),
(123869, '2024-06-22', '2024-07-02', 1, 0, 2, 13),
(123870, '2024-06-25', '2024-07-05', 0, 1, 2, 17),
(123871, '2024-06-28', '2024-07-08', 1, 0, 2, 15),
(123872, '2024-07-01', '2024-07-11', 0, 1, 2, 12),
(123873, '2024-07-04', '2024-07-14', 1, 0, 2, 14),
(123874, '2024-07-07', '2024-07-17', 0, 1, 2, 16),
(123875, '2024-07-10', '2024-07-20', 1, 0, 2, 17),
(123876, '2024-07-13', '2024-07-23', 0, 1, 2, 18),
(123877, '2024-07-16', '2024-07-26', 1, 0, 2, 19),
(123878, '2024-07-19', '2024-07-29', 0, 1, 2, 20),
(123879, '2024-07-22', '2024-08-01', 1, 0, 2, 21),
(123880, '2024-07-25', '2024-08-05', 0, 1, 2, 15),
(123881, '2024-07-28', '2024-08-07', 1, 0, 2, 13),
(123882, '2024-08-01', '2024-08-11', 0, 1, 2, 14),
(123883, '2024-08-04', '2024-08-14', 1, 0, 2, 16),
(123884, '2024-08-07', '2024-08-17', 0, 1, 2, 18),
(123885, '2024-08-10', '2024-08-20', 1, 0, 2, 12),
(123886, '2024-08-13', '2024-08-23', 0, 1, 2, 19),
(123887, '2024-08-16', '2024-08-26', 1, 0, 2, 20),
(123888, '2024-08-19', '2024-08-29', 0, 1, 2, 21),
(123889, '2024-08-22', '2024-09-01', 1, 0, 2, 13),
(123890, '2024-08-25', '2024-09-05', 0, 1, 2, 17),
(123891, '2024-08-28', '2024-09-07', 1, 0, 2, 15),
(123892, '2024-09-01', '2024-09-11', 0, 1, 2, 12),
(123893, '2024-09-04', '2024-09-14', 1, 0, 2, 14),
(123894, '2024-09-07', '2024-09-17', 0, 1, 2, 16),
(123895, '2024-09-10', '2024-09-20', 1, 0, 2, 17),
(123896, '2024-09-13', '2024-09-23', 0, 1, 2, 18),
(123897, '2024-09-16', '2024-09-26', 1, 0, 2, 19),
(123898, '2024-09-19', '2024-09-29', 0, 1, 2, 20),
(123899, '2024-09-22', '2024-10-02', 1, 0, 2, 21),
(123900, '2024-09-25', '2024-10-05', 0, 1, 2, 15),
(123901, '2024-09-28', '2024-10-07', 1, 0, 2, 13),
(123902, '2024-10-01', '2024-10-11', 0, 1, 2, 14),
(123903, '2024-10-04', '2024-10-14', 1, 0, 2, 16),
(123904, '2024-10-07', '2024-10-17', 0, 1, 2, 18),
(123905, '2024-10-10', '2024-10-20', 1, 0, 2, 12),
(123906, '2024-10-13', '2024-10-23', 0, 1, 2, 19),
(123907, '2024-10-16', '2024-10-26', 1, 0, 2, 20),
(123908, '2024-10-19', '2024-10-29', 0, 1, 2, 21),
(123909, '2024-10-22', '2024-11-01', 1, 0, 2, 13),
(123910, '2024-10-25', '2024-11-05', 0, 1, 2, 17),
(123911, '2024-10-28', '2024-11-07', 1, 0, 2, 15),
(123912, '2024-11-01', '2024-11-11', 0, 1, 2, 12),
(123913, '2024-11-04', '2024-11-14', 1, 0, 2, 14),
(123914, '2024-11-07', '2024-11-17', 0, 1, 2, 16),
(123915, '2024-11-10', '2024-11-20', 1, 0, 2, 17),
(123916, '2024-11-13', '2024-11-23', 0, 1, 2, 18),
(123917, '2024-11-16', '2024-11-26', 1, 0, 2, 19),
(123918, '2024-11-19', '2024-11-29', 0, 1, 2, 20),
(123919, '2024-11-22', '2024-12-02', 1, 0, 2, 21),
(123920, '2024-11-25', '2024-12-05', 0, 1, 2, 15),
(123921, '2024-11-28', '2024-12-07', 1, 0, 2, 13);

--
-- Disparadores `app_arriendo`
--
DELIMITER $$
CREATE TRIGGER `trg_fill_buffer_arriendos` AFTER INSERT ON `app_arriendo` FOR EACH ROW BEGIN
    DECLARE new_id_cliente INT;
    DECLARE new_id_tiempo INT;
    DECLARE new_id_arriendo INT;
    DECLARE new_id_estado INT;

    SET new_id_cliente = (SELECT id_cliente FROM etl.dimCliente WHERE email = (SELECT email FROM dbacapstone.app_customuser WHERE id = NEW.cliente_id LIMIT 1));
    IF new_id_cliente IS NULL THEN
        INSERT INTO etl.dimCliente (email, rut, first_name, last_name, telefono)
        SELECT email, rut, first_name, last_name, telefono
        FROM dbacapstone.app_customuser
        WHERE id = NEW.cliente_id;
        SET new_id_cliente = LAST_INSERT_ID();
    END IF;

    SET new_id_tiempo = (SELECT id_tiempo_arriendo FROM etl.dimTiempoArriendos WHERE fecha_arriendo = NEW.fecha_inicio AND fecha_devolucion = NEW.fecha_fin LIMIT 1);
    IF new_id_tiempo IS NULL THEN
        INSERT INTO etl.dimTiempoArriendos (fecha_arriendo, fecha_devolucion, mes, anio, dia)
        VALUES (NEW.fecha_inicio, NEW.fecha_fin, MONTH(NEW.fecha_inicio), YEAR(NEW.fecha_inicio), DAY(NEW.fecha_inicio));
        SET new_id_tiempo = LAST_INSERT_ID();
    END IF;

    INSERT INTO etl.dimArriendos (nom_libro, nombre_autor, nombre_genero, stock_total_arriendo, id_tiempo_arriendo)
    SELECT 
        l.nom_libro,
        a.nombre_autor,
        g.nombre,
        l.stock,
        new_id_tiempo
    FROM dbacapstone.app_libroarr l
    LEFT JOIN dbacapstone.app_autor a ON l.id_autor_id = a.id
    LEFT JOIN dbacapstone.app_generolib g ON l.id_genero_id = g.id
    WHERE l.id = NEW.producto_id;
    SET new_id_arriendo = LAST_INSERT_ID();

    SET new_id_estado = (SELECT id_estado_devolucion FROM etl.dimEstadoDevolucion WHERE estado = NEW.libro_entregado LIMIT 1);
    IF new_id_estado IS NULL THEN
        INSERT INTO etl.dimEstadoDevolucion (estado)
        VALUES (NEW.libro_entregado);
        SET new_id_estado = LAST_INSERT_ID();
    END IF;

    INSERT INTO etl.hechos_buffer (id_compra, id_arriendo, id_cliente, id_estado_devolucion)
    VALUES (NULL, new_id_arriendo, new_id_cliente, new_id_estado);
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `trg_update_dimArriendos_on_update` AFTER UPDATE ON `app_arriendo` FOR EACH ROW BEGIN
    UPDATE etl.dimArriendos
    SET 
        nom_libro = (SELECT l.nom_libro FROM dbacapstone.app_libroarr l WHERE l.id = NEW.producto_id),
        nombre_autor = (SELECT a.nombre_autor FROM dbacapstone.app_libroarr l 
                        JOIN dbacapstone.app_autor a ON l.id_autor_id = a.id WHERE l.id = NEW.producto_id),
        nombre_genero = (SELECT g.nombre FROM dbacapstone.app_libroarr l 
                         JOIN dbacapstone.app_generolib g ON l.id_genero_id = g.id WHERE l.id = NEW.producto_id),
        stock_total_arriendo = (SELECT l.stock FROM dbacapstone.app_libroarr l WHERE l.id = NEW.producto_id)
    WHERE id_arriendo = OLD.id;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `trg_update_dimEstadoDevolucion` AFTER UPDATE ON `app_arriendo` FOR EACH ROW BEGIN
    DECLARE id_estado INT;

    SET id_estado = (SELECT id_estado_devolucion 
                     FROM etl.dimEstadoDevolucion 
                     WHERE estado = NEW.libro_entregado 
                     LIMIT 1);

    IF id_estado IS NULL THEN
        INSERT INTO etl.dimEstadoDevolucion (estado)
        VALUES (NEW.libro_entregado);

        SET id_estado = LAST_INSERT_ID();
    END IF;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `trg_update_dimTiempoArriendos` AFTER UPDATE ON `app_arriendo` FOR EACH ROW BEGIN
    DECLARE id_tiempo INT;

    SET id_tiempo = (SELECT id_tiempo_arriendo FROM etl.dimTiempoArriendos 
                     WHERE fecha_arriendo = DATE(NEW.fecha_inicio) AND fecha_devolucion = DATE(NEW.fecha_fin) LIMIT 1);

    IF id_tiempo IS NULL THEN
        INSERT INTO etl.dimTiempoArriendos (fecha_arriendo, fecha_devolucion, dia, mes, anio)
        VALUES (DATE(NEW.fecha_inicio), DATE(NEW.fecha_fin), DAY(NEW.fecha_inicio), MONTH(NEW.fecha_inicio), YEAR(NEW.fecha_inicio));

        SET id_tiempo = LAST_INSERT_ID();
    END IF;

    UPDATE etl.dimArriendos
    SET 
        nom_libro = (SELECT l.nom_libro FROM dbacapstone.app_libroarr l WHERE l.id = NEW.producto_id),
        nombre_autor = (SELECT a.nombre_autor FROM dbacapstone.app_libroarr l 
                        JOIN dbacapstone.app_autor a ON l.id_autor_id = a.id WHERE l.id = NEW.producto_id),
        nombre_genero = (SELECT g.nombre FROM dbacapstone.app_libroarr l 
                         JOIN dbacapstone.app_generolib g ON l.id_genero_id = g.id WHERE l.id = NEW.producto_id),
        stock_total_arriendo = (SELECT l.stock FROM dbacapstone.app_libroarr l WHERE l.id = NEW.producto_id),
        id_tiempo_arriendo = id_tiempo
    WHERE id_arriendo = OLD.id;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `trg_update_dimTiempoArriendos_on_update` AFTER UPDATE ON `app_arriendo` FOR EACH ROW BEGIN
    DECLARE id_tiempo INT;

    SET id_tiempo = (SELECT id_tiempo_arriendo FROM etl.dimTiempoArriendos 
                     WHERE fecha_arriendo = DATE(NEW.fecha_inicio) AND fecha_devolucion = DATE(NEW.fecha_fin) LIMIT 1);

    IF id_tiempo IS NULL THEN
        INSERT INTO etl.dimTiempoArriendos (fecha_arriendo, fecha_devolucion, dia, mes, anio)
        VALUES (DATE(NEW.fecha_inicio), DATE(NEW.fecha_fin), DAY(NEW.fecha_inicio), MONTH(NEW.fecha_inicio), YEAR(NEW.fecha_inicio));

        SET id_tiempo = LAST_INSERT_ID();
    END IF;

    UPDATE etl.dimArriendos
    SET 
        id_tiempo_arriendo = id_tiempo
    WHERE id_arriendo = OLD.id;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `trigger_eliminar_arriendo` AFTER DELETE ON `app_arriendo` FOR EACH ROW BEGIN
    DELETE etl.dimArriendos
    FROM etl.dimArriendos
    JOIN etl.dimTiempoArriendos
    ON etl.dimArriendos.id_tiempo_arriendo = etl.dimTiempoArriendos.id_tiempo_arriendo
    WHERE etl.dimTiempoArriendos.fecha_arriendo = DATE(OLD.fecha_inicio)
      AND etl.dimTiempoArriendos.fecha_devolucion = DATE(OLD.fecha_fin);

    DELETE etl.dimTiempoArriendos
    FROM etl.dimTiempoArriendos
    LEFT JOIN etl.dimArriendos
    ON etl.dimTiempoArriendos.id_tiempo_arriendo = etl.dimArriendos.id_tiempo_arriendo
    WHERE etl.dimTiempoArriendos.fecha_arriendo = DATE(OLD.fecha_inicio)
      AND etl.dimTiempoArriendos.fecha_devolucion = DATE(OLD.fecha_fin)
      AND etl.dimArriendos.id_tiempo_arriendo IS NULL;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `trigger_update_cliente_arriendo` AFTER UPDATE ON `app_arriendo` FOR EACH ROW BEGIN
    UPDATE etl.dimCliente
    SET 
        email = (SELECT email FROM dbacapstone.app_customuser WHERE id = NEW.cliente_id),
        rut = (SELECT rut FROM dbacapstone.app_customuser WHERE id = NEW.cliente_id),
        first_name = (SELECT first_name FROM dbacapstone.app_customuser WHERE id = NEW.cliente_id),
        last_name = (SELECT last_name FROM dbacapstone.app_customuser WHERE id = NEW.cliente_id),
        telefono = (SELECT telefono FROM dbacapstone.app_customuser WHERE id = NEW.cliente_id)
    WHERE id_cliente = NEW.cliente_id;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `app_autor`
--

CREATE TABLE `app_autor` (
  `id` bigint(20) NOT NULL,
  `nombre_autor` varchar(255) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `app_autor`
--

INSERT INTO `app_autor` (`id`, `nombre_autor`) VALUES
(91, 'Gabriel García Márquez'),
(92, 'Isabel Allende'),
(93, 'Jorge Luis Borges'),
(94, 'Mario Vargas Llosa'),
(95, 'Octavio Paz'),
(96, 'Pablo Neruda'),
(97, 'Carlos Fuentes'),
(98, 'Julio Cortázar'),
(99, 'Roberto Bolaño'),
(100, 'Laura Esquivel');

--
-- Disparadores `app_autor`
--
DELIMITER $$
CREATE TRIGGER `trg_update_autor_genero_on_update` AFTER UPDATE ON `app_autor` FOR EACH ROW BEGIN
    -- Actualizar el nombre del autor en dimCompras
    UPDATE etl.dimCompras
    SET
        nombre_autor = NEW.nombre_autor
    WHERE
        nombre_autor = OLD.nombre_autor;

    -- Actualizar el nombre del autor en dimArriendos
    UPDATE etl.dimArriendos
    SET
        nombre_autor = NEW.nombre_autor
    WHERE
        nombre_autor = OLD.nombre_autor;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `app_carrito`
--

CREATE TABLE `app_carrito` (
  `id` bigint(20) NOT NULL,
  `cliente_id` bigint(20) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `app_carrito`
--

INSERT INTO `app_carrito` (`id`, `cliente_id`) VALUES
(1, 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `app_compra`
--

CREATE TABLE `app_compra` (
  `id` bigint(20) NOT NULL,
  `cantidad` int(11) NOT NULL,
  `fecha_compra` datetime(6) NOT NULL,
  `cliente_id` bigint(20) NOT NULL,
  `producto_id` bigint(20) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `app_compra`
--

INSERT INTO `app_compra` (`id`, `cantidad`, `fecha_compra`, `cliente_id`, `producto_id`) VALUES
(12681, 15, '2023-01-15 00:00:00.000000', 2, 46),
(12682, 15, '2023-01-16 00:00:00.000000', 2, 40),
(12683, 11, '2023-01-27 00:00:00.000000', 2, 44),
(12684, 6, '2023-01-25 00:00:00.000000', 2, 41),
(12685, 12, '2023-01-03 00:00:00.000000', 2, 39),
(12686, 9, '2023-01-12 00:00:00.000000', 2, 43),
(12687, 3, '2023-01-01 00:00:00.000000', 2, 44),
(12688, 13, '2023-01-22 00:00:00.000000', 2, 43),
(12689, 3, '2023-01-21 00:00:00.000000', 2, 44),
(12690, 7, '2023-01-03 00:00:00.000000', 2, 39),
(12691, 15, '2023-01-08 00:00:00.000000', 2, 46),
(12692, 8, '2023-01-06 00:00:00.000000', 2, 46),
(12693, 20, '2023-01-01 00:00:00.000000', 2, 39),
(12694, 10, '2023-01-27 00:00:00.000000', 2, 42),
(12695, 10, '2023-01-23 00:00:00.000000', 2, 40),
(12696, 11, '2023-01-07 00:00:00.000000', 2, 45),
(12697, 17, '2023-01-11 00:00:00.000000', 2, 38),
(12698, 6, '2023-01-22 00:00:00.000000', 2, 43),
(12699, 3, '2023-01-05 00:00:00.000000', 2, 41),
(12700, 19, '2023-01-19 00:00:00.000000', 2, 40),
(12701, 2, '2023-02-12 00:00:00.000000', 2, 44),
(12702, 17, '2023-02-20 00:00:00.000000', 2, 44),
(12703, 7, '2023-02-12 00:00:00.000000', 2, 44),
(12704, 18, '2023-02-16 00:00:00.000000', 2, 42),
(12705, 18, '2023-02-24 00:00:00.000000', 2, 44),
(12706, 12, '2023-02-01 00:00:00.000000', 2, 45),
(12707, 2, '2023-02-15 00:00:00.000000', 2, 45),
(12708, 4, '2023-02-26 00:00:00.000000', 2, 46),
(12709, 10, '2023-02-16 00:00:00.000000', 2, 42),
(12710, 17, '2023-02-15 00:00:00.000000', 2, 43),
(12711, 15, '2023-02-01 00:00:00.000000', 2, 41),
(12712, 7, '2023-02-09 00:00:00.000000', 2, 46),
(12713, 10, '2023-02-11 00:00:00.000000', 2, 42),
(12714, 14, '2023-02-15 00:00:00.000000', 2, 41),
(12715, 17, '2023-02-06 00:00:00.000000', 2, 40),
(12716, 3, '2023-02-22 00:00:00.000000', 2, 41),
(12717, 9, '2023-02-14 00:00:00.000000', 2, 40),
(12718, 16, '2023-02-08 00:00:00.000000', 2, 40),
(12719, 8, '2023-02-16 00:00:00.000000', 2, 41),
(12720, 18, '2023-02-26 00:00:00.000000', 2, 41),
(12721, 2, '2023-03-06 00:00:00.000000', 2, 39),
(12722, 5, '2023-03-16 00:00:00.000000', 2, 46),
(12723, 14, '2023-03-23 00:00:00.000000', 2, 39),
(12724, 11, '2023-03-21 00:00:00.000000', 2, 42),
(12725, 1, '2023-03-21 00:00:00.000000', 2, 42),
(12726, 11, '2023-03-03 00:00:00.000000', 2, 45),
(12727, 1, '2023-03-08 00:00:00.000000', 2, 45),
(12728, 14, '2023-03-15 00:00:00.000000', 2, 38),
(12729, 18, '2023-03-28 00:00:00.000000', 2, 42),
(12730, 15, '2023-03-19 00:00:00.000000', 2, 38),
(12731, 3, '2023-03-15 00:00:00.000000', 2, 45),
(12732, 13, '2023-03-05 00:00:00.000000', 2, 39),
(12733, 17, '2023-03-06 00:00:00.000000', 2, 38),
(12734, 8, '2023-03-12 00:00:00.000000', 2, 38),
(12735, 4, '2023-03-26 00:00:00.000000', 2, 38),
(12736, 10, '2023-03-24 00:00:00.000000', 2, 41),
(12737, 1, '2023-03-01 00:00:00.000000', 2, 38),
(12738, 14, '2023-03-16 00:00:00.000000', 2, 43),
(12739, 1, '2023-03-21 00:00:00.000000', 2, 46),
(12740, 1, '2023-03-02 00:00:00.000000', 2, 39),
(12741, 14, '2023-04-23 00:00:00.000000', 2, 42),
(12742, 20, '2023-04-24 00:00:00.000000', 2, 44),
(12743, 7, '2023-04-15 00:00:00.000000', 2, 44),
(12744, 11, '2023-04-15 00:00:00.000000', 2, 46),
(12745, 13, '2023-04-14 00:00:00.000000', 2, 45),
(12746, 7, '2023-04-23 00:00:00.000000', 2, 39),
(12747, 10, '2023-04-09 00:00:00.000000', 2, 46),
(12748, 12, '2023-04-27 00:00:00.000000', 2, 41),
(12749, 18, '2023-04-14 00:00:00.000000', 2, 43),
(12750, 18, '2023-04-21 00:00:00.000000', 2, 45),
(12751, 15, '2023-04-19 00:00:00.000000', 2, 40),
(12752, 7, '2023-04-25 00:00:00.000000', 2, 38),
(12753, 4, '2023-04-19 00:00:00.000000', 2, 40),
(12754, 10, '2023-04-08 00:00:00.000000', 2, 45),
(12755, 17, '2023-04-23 00:00:00.000000', 2, 38),
(12756, 19, '2023-04-14 00:00:00.000000', 2, 44),
(12757, 17, '2023-04-16 00:00:00.000000', 2, 43),
(12758, 13, '2023-04-12 00:00:00.000000', 2, 41),
(12759, 17, '2023-04-28 00:00:00.000000', 2, 45),
(12760, 7, '2023-04-16 00:00:00.000000', 2, 39),
(12761, 18, '2023-05-16 00:00:00.000000', 2, 42),
(12762, 2, '2023-05-24 00:00:00.000000', 2, 45),
(12763, 3, '2023-05-23 00:00:00.000000', 2, 38),
(12764, 7, '2023-05-22 00:00:00.000000', 2, 38),
(12765, 4, '2023-05-25 00:00:00.000000', 2, 46),
(12766, 10, '2023-05-06 00:00:00.000000', 2, 42),
(12767, 17, '2023-05-19 00:00:00.000000', 2, 41),
(12768, 11, '2023-05-20 00:00:00.000000', 2, 46),
(12769, 10, '2023-05-24 00:00:00.000000', 2, 45),
(12770, 7, '2023-05-12 00:00:00.000000', 2, 44),
(12771, 16, '2023-05-18 00:00:00.000000', 2, 43),
(12772, 9, '2023-05-05 00:00:00.000000', 2, 46),
(12773, 15, '2023-05-06 00:00:00.000000', 2, 44),
(12774, 10, '2023-05-25 00:00:00.000000', 2, 41),
(12775, 19, '2023-05-27 00:00:00.000000', 2, 45),
(12776, 15, '2023-05-13 00:00:00.000000', 2, 38),
(12777, 9, '2023-05-03 00:00:00.000000', 2, 41),
(12778, 15, '2023-05-23 00:00:00.000000', 2, 44),
(12779, 6, '2023-05-16 00:00:00.000000', 2, 46),
(12780, 4, '2023-05-11 00:00:00.000000', 2, 40),
(12781, 8, '2023-06-20 00:00:00.000000', 2, 41),
(12782, 13, '2023-06-28 00:00:00.000000', 2, 39),
(12783, 11, '2023-06-10 00:00:00.000000', 2, 41),
(12784, 5, '2023-06-26 00:00:00.000000', 2, 46),
(12785, 9, '2023-06-02 00:00:00.000000', 2, 38),
(12786, 16, '2023-06-13 00:00:00.000000', 2, 41),
(12787, 20, '2023-06-05 00:00:00.000000', 2, 41),
(12788, 4, '2023-06-09 00:00:00.000000', 2, 42),
(12789, 16, '2023-06-13 00:00:00.000000', 2, 37),
(12790, 6, '2023-06-05 00:00:00.000000', 2, 43),
(12791, 6, '2023-06-13 00:00:00.000000', 2, 37),
(12792, 7, '2023-06-21 00:00:00.000000', 2, 42),
(12793, 9, '2023-06-27 00:00:00.000000', 2, 41),
(12794, 20, '2023-06-22 00:00:00.000000', 2, 40),
(12795, 17, '2023-06-28 00:00:00.000000', 2, 46),
(12796, 14, '2023-06-20 00:00:00.000000', 2, 44),
(12797, 5, '2023-06-27 00:00:00.000000', 2, 41),
(12798, 20, '2023-06-23 00:00:00.000000', 2, 43),
(12799, 17, '2023-06-01 00:00:00.000000', 2, 42),
(12800, 16, '2023-06-04 00:00:00.000000', 2, 41),
(12801, 8, '2023-07-22 00:00:00.000000', 2, 43),
(12802, 11, '2023-07-06 00:00:00.000000', 2, 43),
(12803, 4, '2023-07-15 00:00:00.000000', 2, 43),
(12804, 12, '2023-07-03 00:00:00.000000', 2, 38),
(12805, 13, '2023-07-12 00:00:00.000000', 2, 38),
(12806, 12, '2023-07-26 00:00:00.000000', 2, 44),
(12807, 13, '2023-07-19 00:00:00.000000', 2, 44),
(12808, 12, '2023-07-08 00:00:00.000000', 2, 46),
(12809, 12, '2023-07-15 00:00:00.000000', 2, 40),
(12810, 12, '2023-07-05 00:00:00.000000', 2, 40),
(12811, 12, '2023-07-04 00:00:00.000000', 2, 45),
(12812, 5, '2023-07-09 00:00:00.000000', 2, 43),
(12813, 1, '2023-07-17 00:00:00.000000', 2, 46),
(12814, 1, '2023-07-05 00:00:00.000000', 2, 38),
(12815, 15, '2023-07-28 00:00:00.000000', 2, 39),
(12816, 17, '2023-07-07 00:00:00.000000', 2, 46),
(12817, 18, '2023-07-17 00:00:00.000000', 2, 38),
(12818, 16, '2023-07-10 00:00:00.000000', 2, 42),
(12819, 20, '2023-07-25 00:00:00.000000', 2, 44),
(12820, 19, '2023-07-13 00:00:00.000000', 2, 44),
(12821, 5, '2023-08-28 00:00:00.000000', 2, 46),
(12822, 2, '2023-08-04 00:00:00.000000', 2, 44),
(12823, 5, '2023-08-18 00:00:00.000000', 2, 45),
(12824, 12, '2023-08-25 00:00:00.000000', 2, 42),
(12825, 3, '2023-08-15 00:00:00.000000', 2, 46),
(12826, 7, '2023-08-03 00:00:00.000000', 2, 40),
(12827, 12, '2023-08-12 00:00:00.000000', 2, 44),
(12828, 2, '2023-08-04 00:00:00.000000', 2, 42),
(12829, 11, '2023-08-28 00:00:00.000000', 2, 40),
(12830, 2, '2023-08-19 00:00:00.000000', 2, 40),
(12831, 13, '2023-08-26 00:00:00.000000', 2, 44),
(12832, 16, '2023-08-22 00:00:00.000000', 2, 42),
(12833, 6, '2023-08-26 00:00:00.000000', 2, 45),
(12834, 17, '2023-08-11 00:00:00.000000', 2, 43),
(12835, 8, '2023-08-07 00:00:00.000000', 2, 40),
(12836, 13, '2023-08-24 00:00:00.000000', 2, 42),
(12837, 4, '2023-08-13 00:00:00.000000', 2, 39),
(12838, 9, '2023-08-23 00:00:00.000000', 2, 42),
(12839, 14, '2023-08-14 00:00:00.000000', 2, 44),
(12840, 17, '2023-08-23 00:00:00.000000', 2, 46),
(12841, 6, '2023-09-25 00:00:00.000000', 2, 44),
(12842, 14, '2023-09-12 00:00:00.000000', 2, 46),
(12843, 1, '2023-09-04 00:00:00.000000', 2, 37),
(12844, 20, '2023-09-14 00:00:00.000000', 2, 38),
(12845, 13, '2023-09-17 00:00:00.000000', 2, 46),
(12846, 10, '2023-09-17 00:00:00.000000', 2, 45),
(12847, 3, '2023-09-09 00:00:00.000000', 2, 38),
(12848, 3, '2023-09-26 00:00:00.000000', 2, 39),
(12849, 8, '2023-09-22 00:00:00.000000', 2, 44),
(12850, 4, '2023-09-15 00:00:00.000000', 2, 40),
(12851, 3, '2023-09-19 00:00:00.000000', 2, 45),
(12852, 3, '2023-09-03 00:00:00.000000', 2, 44),
(12853, 17, '2023-09-15 00:00:00.000000', 2, 43),
(12854, 6, '2023-09-02 00:00:00.000000', 2, 39),
(12855, 17, '2023-09-16 00:00:00.000000', 2, 37),
(12856, 9, '2023-09-05 00:00:00.000000', 2, 38),
(12857, 2, '2023-09-25 00:00:00.000000', 2, 39),
(12858, 13, '2023-09-19 00:00:00.000000', 2, 41),
(12859, 11, '2023-09-06 00:00:00.000000', 2, 44),
(12860, 2, '2023-09-02 00:00:00.000000', 2, 41),
(12861, 1, '2023-10-21 00:00:00.000000', 2, 40),
(12862, 1, '2023-10-10 00:00:00.000000', 2, 39),
(12863, 19, '2023-10-06 00:00:00.000000', 2, 37),
(12864, 1, '2023-10-12 00:00:00.000000', 2, 43),
(12865, 9, '2023-10-24 00:00:00.000000', 2, 41),
(12866, 19, '2023-10-05 00:00:00.000000', 2, 46),
(12867, 5, '2023-10-07 00:00:00.000000', 2, 42),
(12868, 12, '2023-10-20 00:00:00.000000', 2, 45),
(12869, 19, '2023-10-12 00:00:00.000000', 2, 44),
(12870, 20, '2023-10-28 00:00:00.000000', 2, 40),
(12871, 11, '2023-10-08 00:00:00.000000', 2, 41),
(12872, 10, '2023-10-01 00:00:00.000000', 2, 37),
(12873, 8, '2023-10-25 00:00:00.000000', 2, 38),
(12874, 12, '2023-10-23 00:00:00.000000', 2, 38),
(12875, 13, '2023-10-22 00:00:00.000000', 2, 38),
(12876, 15, '2023-10-01 00:00:00.000000', 2, 44),
(12877, 18, '2023-10-26 00:00:00.000000', 2, 41),
(12878, 7, '2023-10-02 00:00:00.000000', 2, 38),
(12879, 13, '2023-10-24 00:00:00.000000', 2, 42),
(12880, 16, '2023-10-21 00:00:00.000000', 2, 43),
(12881, 3, '2023-11-19 00:00:00.000000', 2, 39),
(12882, 16, '2023-11-18 00:00:00.000000', 2, 41),
(12883, 13, '2023-11-25 00:00:00.000000', 2, 44),
(12884, 20, '2023-11-24 00:00:00.000000', 2, 40),
(12885, 11, '2023-11-21 00:00:00.000000', 2, 42),
(12886, 11, '2023-11-18 00:00:00.000000', 2, 39),
(12887, 15, '2023-11-12 00:00:00.000000', 2, 37),
(12888, 3, '2023-11-25 00:00:00.000000', 2, 44),
(12889, 12, '2023-11-21 00:00:00.000000', 2, 40),
(12890, 12, '2023-11-24 00:00:00.000000', 2, 43),
(12891, 15, '2023-11-22 00:00:00.000000', 2, 38),
(12892, 17, '2023-11-20 00:00:00.000000', 2, 41),
(12893, 16, '2023-11-18 00:00:00.000000', 2, 40),
(12894, 20, '2023-11-11 00:00:00.000000', 2, 38),
(12895, 8, '2023-11-06 00:00:00.000000', 2, 44),
(12896, 3, '2023-11-13 00:00:00.000000', 2, 38),
(12897, 14, '2023-11-08 00:00:00.000000', 2, 46),
(12898, 14, '2023-11-06 00:00:00.000000', 2, 42),
(12899, 17, '2023-11-15 00:00:00.000000', 2, 39),
(12900, 17, '2023-11-02 00:00:00.000000', 2, 37),
(12901, 16, '2023-12-20 00:00:00.000000', 2, 42),
(12902, 6, '2023-12-15 00:00:00.000000', 2, 42),
(12903, 14, '2023-12-28 00:00:00.000000', 2, 46),
(12904, 16, '2023-12-23 00:00:00.000000', 2, 42),
(12905, 18, '2023-12-06 00:00:00.000000', 2, 40),
(12906, 20, '2023-12-25 00:00:00.000000', 2, 37),
(12907, 1, '2023-12-27 00:00:00.000000', 2, 40),
(12908, 20, '2023-12-23 00:00:00.000000', 2, 40),
(12909, 17, '2023-12-10 00:00:00.000000', 2, 38),
(12910, 4, '2023-12-01 00:00:00.000000', 2, 42),
(12911, 14, '2023-12-14 00:00:00.000000', 2, 45),
(12912, 15, '2023-12-23 00:00:00.000000', 2, 44),
(12913, 19, '2023-12-03 00:00:00.000000', 2, 39),
(12914, 10, '2023-12-06 00:00:00.000000', 2, 42),
(12915, 3, '2023-12-18 00:00:00.000000', 2, 38),
(12916, 9, '2023-12-06 00:00:00.000000', 2, 43),
(12917, 6, '2023-12-08 00:00:00.000000', 2, 41),
(12918, 2, '2023-12-12 00:00:00.000000', 2, 39),
(12919, 17, '2023-12-02 00:00:00.000000', 2, 44),
(12920, 17, '2023-12-12 00:00:00.000000', 2, 39),
(12921, 1, '2024-01-18 00:00:00.000000', 2, 38),
(12922, 7, '2024-01-10 00:00:00.000000', 2, 44),
(12923, 17, '2024-01-22 00:00:00.000000', 2, 43),
(12924, 12, '2024-01-16 00:00:00.000000', 2, 41),
(12925, 2, '2024-01-07 00:00:00.000000', 2, 39),
(12926, 17, '2024-01-27 00:00:00.000000', 2, 41),
(12927, 20, '2024-01-04 00:00:00.000000', 2, 42),
(12928, 9, '2024-01-12 00:00:00.000000', 2, 43),
(12929, 8, '2024-01-09 00:00:00.000000', 2, 45),
(12930, 19, '2024-01-04 00:00:00.000000', 2, 37),
(12931, 15, '2024-01-11 00:00:00.000000', 2, 46),
(12932, 10, '2024-01-24 00:00:00.000000', 2, 38),
(12933, 2, '2024-01-21 00:00:00.000000', 2, 42),
(12934, 14, '2024-01-01 00:00:00.000000', 2, 44),
(12935, 18, '2024-01-09 00:00:00.000000', 2, 39),
(12936, 17, '2024-01-11 00:00:00.000000', 2, 46),
(12937, 3, '2024-01-03 00:00:00.000000', 2, 45),
(12938, 14, '2024-01-05 00:00:00.000000', 2, 38),
(12939, 18, '2024-01-18 00:00:00.000000', 2, 38),
(12940, 18, '2024-01-25 00:00:00.000000', 2, 45),
(12941, 4, '2024-02-19 00:00:00.000000', 2, 37),
(12942, 5, '2024-02-06 00:00:00.000000', 2, 43),
(12943, 17, '2024-02-27 00:00:00.000000', 2, 40),
(12944, 1, '2024-02-17 00:00:00.000000', 2, 37),
(12945, 1, '2024-02-06 00:00:00.000000', 2, 46),
(12946, 13, '2024-02-06 00:00:00.000000', 2, 37),
(12947, 18, '2024-02-08 00:00:00.000000', 2, 42),
(12948, 8, '2024-02-28 00:00:00.000000', 2, 39),
(12949, 20, '2024-02-26 00:00:00.000000', 2, 41),
(12950, 3, '2024-02-23 00:00:00.000000', 2, 46),
(12951, 5, '2024-02-04 00:00:00.000000', 2, 43),
(12952, 20, '2024-02-17 00:00:00.000000', 2, 42),
(12953, 1, '2024-02-05 00:00:00.000000', 2, 43),
(12954, 13, '2024-02-03 00:00:00.000000', 2, 38),
(12955, 7, '2024-02-02 00:00:00.000000', 2, 37),
(12956, 3, '2024-02-13 00:00:00.000000', 2, 40),
(12957, 8, '2024-02-09 00:00:00.000000', 2, 43),
(12958, 5, '2024-02-11 00:00:00.000000', 2, 45),
(12959, 18, '2024-02-24 00:00:00.000000', 2, 39),
(12960, 14, '2024-02-17 00:00:00.000000', 2, 46),
(12961, 7, '2024-03-23 00:00:00.000000', 2, 44),
(12962, 5, '2024-03-07 00:00:00.000000', 2, 41),
(12963, 18, '2024-03-23 00:00:00.000000', 2, 44),
(12964, 2, '2024-03-06 00:00:00.000000', 2, 44),
(12965, 11, '2024-03-09 00:00:00.000000', 2, 43),
(12966, 1, '2024-03-28 00:00:00.000000', 2, 39),
(12967, 16, '2024-03-13 00:00:00.000000', 2, 43),
(12968, 11, '2024-03-03 00:00:00.000000', 2, 38),
(12969, 17, '2024-03-06 00:00:00.000000', 2, 42),
(12970, 20, '2024-03-01 00:00:00.000000', 2, 46),
(12971, 17, '2024-03-26 00:00:00.000000', 2, 42),
(12972, 19, '2024-03-21 00:00:00.000000', 2, 42),
(12973, 7, '2024-03-05 00:00:00.000000', 2, 46),
(12974, 5, '2024-03-06 00:00:00.000000', 2, 45),
(12975, 6, '2024-03-21 00:00:00.000000', 2, 41),
(12976, 12, '2024-03-17 00:00:00.000000', 2, 46),
(12977, 7, '2024-03-03 00:00:00.000000', 2, 44),
(12978, 20, '2024-03-28 00:00:00.000000', 2, 45),
(12979, 17, '2024-03-20 00:00:00.000000', 2, 45),
(12980, 16, '2024-03-28 00:00:00.000000', 2, 40),
(12981, 18, '2024-04-20 00:00:00.000000', 2, 38),
(12982, 9, '2024-04-01 00:00:00.000000', 2, 46),
(12983, 16, '2024-04-10 00:00:00.000000', 2, 39),
(12984, 9, '2024-04-11 00:00:00.000000', 2, 41),
(12985, 2, '2024-04-14 00:00:00.000000', 2, 46),
(12986, 6, '2024-04-16 00:00:00.000000', 2, 43),
(12987, 2, '2024-04-21 00:00:00.000000', 2, 46),
(12988, 17, '2024-04-22 00:00:00.000000', 2, 45),
(12989, 13, '2024-04-18 00:00:00.000000', 2, 42),
(12990, 17, '2024-04-10 00:00:00.000000', 2, 37),
(12991, 3, '2024-04-01 00:00:00.000000', 2, 37),
(12992, 3, '2024-04-15 00:00:00.000000', 2, 44),
(12993, 6, '2024-04-05 00:00:00.000000', 2, 37),
(12994, 5, '2024-04-04 00:00:00.000000', 2, 40),
(12995, 12, '2024-04-13 00:00:00.000000', 2, 42),
(12996, 5, '2024-04-13 00:00:00.000000', 2, 44),
(12997, 11, '2024-04-15 00:00:00.000000', 2, 46),
(12998, 14, '2024-04-09 00:00:00.000000', 2, 46),
(12999, 9, '2024-04-16 00:00:00.000000', 2, 37),
(13000, 3, '2024-04-22 00:00:00.000000', 2, 46),
(13001, 5, '2024-05-23 00:00:00.000000', 2, 46),
(13002, 13, '2024-05-26 00:00:00.000000', 2, 44),
(13003, 12, '2024-05-13 00:00:00.000000', 2, 46),
(13004, 17, '2024-05-24 00:00:00.000000', 2, 38),
(13005, 16, '2024-05-16 00:00:00.000000', 2, 46),
(13006, 6, '2024-05-18 00:00:00.000000', 2, 42),
(13007, 20, '2024-05-09 00:00:00.000000', 2, 45),
(13008, 19, '2024-05-28 00:00:00.000000', 2, 42),
(13009, 17, '2024-05-22 00:00:00.000000', 2, 40),
(13010, 5, '2024-05-06 00:00:00.000000', 2, 40),
(13011, 14, '2024-05-24 00:00:00.000000', 2, 39),
(13012, 13, '2024-05-16 00:00:00.000000', 2, 44),
(13013, 14, '2024-05-24 00:00:00.000000', 2, 45),
(13014, 7, '2024-05-14 00:00:00.000000', 2, 37),
(13015, 14, '2024-05-27 00:00:00.000000', 2, 44),
(13016, 3, '2024-05-21 00:00:00.000000', 2, 41),
(13017, 19, '2024-05-04 00:00:00.000000', 2, 42),
(13018, 20, '2024-05-24 00:00:00.000000', 2, 41),
(13019, 3, '2024-05-12 00:00:00.000000', 2, 46),
(13020, 3, '2024-05-08 00:00:00.000000', 2, 46),
(13021, 11, '2024-06-03 00:00:00.000000', 2, 39),
(13022, 1, '2024-06-25 00:00:00.000000', 2, 43),
(13023, 5, '2024-06-23 00:00:00.000000', 2, 43),
(13024, 14, '2024-06-24 00:00:00.000000', 2, 44),
(13025, 5, '2024-06-07 00:00:00.000000', 2, 46),
(13026, 10, '2024-06-26 00:00:00.000000', 2, 45),
(13027, 18, '2024-06-01 00:00:00.000000', 2, 46),
(13028, 8, '2024-06-23 00:00:00.000000', 2, 38),
(13029, 12, '2024-06-19 00:00:00.000000', 2, 41),
(13030, 15, '2024-06-16 00:00:00.000000', 2, 46),
(13031, 15, '2024-06-01 00:00:00.000000', 2, 39),
(13032, 20, '2024-06-21 00:00:00.000000', 2, 38),
(13033, 20, '2024-06-12 00:00:00.000000', 2, 46),
(13034, 20, '2024-06-24 00:00:00.000000', 2, 45),
(13035, 15, '2024-06-24 00:00:00.000000', 2, 41),
(13036, 16, '2024-06-22 00:00:00.000000', 2, 45),
(13037, 11, '2024-06-22 00:00:00.000000', 2, 40),
(13038, 17, '2024-06-13 00:00:00.000000', 2, 41),
(13039, 3, '2024-06-07 00:00:00.000000', 2, 39),
(13040, 20, '2024-06-07 00:00:00.000000', 2, 37),
(13041, 16, '2024-07-10 00:00:00.000000', 2, 44),
(13042, 8, '2024-07-11 00:00:00.000000', 2, 37),
(13043, 1, '2024-07-23 00:00:00.000000', 2, 44),
(13044, 13, '2024-07-10 00:00:00.000000', 2, 40),
(13045, 13, '2024-07-11 00:00:00.000000', 2, 41),
(13046, 15, '2024-07-21 00:00:00.000000', 2, 42),
(13047, 9, '2024-07-04 00:00:00.000000', 2, 44),
(13048, 6, '2024-07-09 00:00:00.000000', 2, 42),
(13049, 7, '2024-07-08 00:00:00.000000', 2, 43),
(13050, 11, '2024-07-09 00:00:00.000000', 2, 44),
(13051, 10, '2024-07-03 00:00:00.000000', 2, 45),
(13052, 8, '2024-07-26 00:00:00.000000', 2, 39),
(13053, 16, '2024-07-01 00:00:00.000000', 2, 44),
(13054, 20, '2024-07-19 00:00:00.000000', 2, 40),
(13055, 18, '2024-07-01 00:00:00.000000', 2, 42),
(13056, 3, '2024-07-13 00:00:00.000000', 2, 43),
(13057, 9, '2024-07-08 00:00:00.000000', 2, 41),
(13058, 2, '2024-07-25 00:00:00.000000', 2, 46),
(13059, 19, '2024-07-04 00:00:00.000000', 2, 45),
(13060, 9, '2024-07-20 00:00:00.000000', 2, 41),
(13061, 17, '2024-08-07 00:00:00.000000', 2, 42),
(13062, 3, '2024-08-06 00:00:00.000000', 2, 44),
(13063, 5, '2024-08-09 00:00:00.000000', 2, 41),
(13064, 8, '2024-08-13 00:00:00.000000', 2, 41),
(13065, 3, '2024-08-02 00:00:00.000000', 2, 40),
(13066, 7, '2024-08-12 00:00:00.000000', 2, 37),
(13067, 8, '2024-08-20 00:00:00.000000', 2, 38),
(13068, 7, '2024-08-18 00:00:00.000000', 2, 38),
(13069, 17, '2024-08-03 00:00:00.000000', 2, 37),
(13070, 12, '2024-08-11 00:00:00.000000', 2, 42),
(13071, 14, '2024-08-23 00:00:00.000000', 2, 40),
(13072, 15, '2024-08-14 00:00:00.000000', 2, 44),
(13073, 11, '2024-08-24 00:00:00.000000', 2, 37),
(13074, 5, '2024-08-07 00:00:00.000000', 2, 42),
(13075, 7, '2024-08-10 00:00:00.000000', 2, 39),
(13076, 14, '2024-08-27 00:00:00.000000', 2, 44),
(13077, 14, '2024-08-10 00:00:00.000000', 2, 46),
(13078, 20, '2024-08-14 00:00:00.000000', 2, 37),
(13079, 5, '2024-08-10 00:00:00.000000', 2, 42),
(13080, 10, '2024-08-21 00:00:00.000000', 2, 44),
(13081, 17, '2024-09-16 00:00:00.000000', 2, 38),
(13082, 16, '2024-09-21 00:00:00.000000', 2, 39),
(13083, 20, '2024-09-03 00:00:00.000000', 2, 43),
(13084, 12, '2024-09-26 00:00:00.000000', 2, 46),
(13085, 8, '2024-09-09 00:00:00.000000', 2, 43),
(13086, 10, '2024-09-12 00:00:00.000000', 2, 44),
(13087, 6, '2024-09-24 00:00:00.000000', 2, 38),
(13088, 13, '2024-09-03 00:00:00.000000', 2, 37),
(13089, 12, '2024-09-15 00:00:00.000000', 2, 42),
(13090, 6, '2024-09-27 00:00:00.000000', 2, 37),
(13091, 7, '2024-09-10 00:00:00.000000', 2, 43),
(13092, 2, '2024-09-26 00:00:00.000000', 2, 42),
(13093, 8, '2024-09-06 00:00:00.000000', 2, 45),
(13094, 5, '2024-09-27 00:00:00.000000', 2, 41),
(13095, 12, '2024-09-11 00:00:00.000000', 2, 37),
(13096, 19, '2024-09-07 00:00:00.000000', 2, 38),
(13097, 1, '2024-09-20 00:00:00.000000', 2, 38),
(13098, 7, '2024-09-20 00:00:00.000000', 2, 42),
(13099, 6, '2024-09-20 00:00:00.000000', 2, 38),
(13100, 16, '2024-09-18 00:00:00.000000', 2, 43),
(13101, 6, '2024-10-01 00:00:00.000000', 2, 38),
(13102, 16, '2024-10-13 00:00:00.000000', 2, 43),
(13103, 17, '2024-10-25 00:00:00.000000', 2, 45),
(13104, 16, '2024-10-07 00:00:00.000000', 2, 44),
(13105, 15, '2024-10-11 00:00:00.000000', 2, 42),
(13106, 16, '2024-10-28 00:00:00.000000', 2, 44),
(13107, 19, '2024-10-04 00:00:00.000000', 2, 43),
(13108, 9, '2024-10-28 00:00:00.000000', 2, 38),
(13109, 9, '2024-10-22 00:00:00.000000', 2, 41),
(13110, 9, '2024-10-14 00:00:00.000000', 2, 46),
(13111, 8, '2024-10-21 00:00:00.000000', 2, 37),
(13112, 13, '2024-10-05 00:00:00.000000', 2, 38),
(13113, 10, '2024-10-23 00:00:00.000000', 2, 39),
(13114, 1, '2024-10-11 00:00:00.000000', 2, 39),
(13115, 19, '2024-10-17 00:00:00.000000', 2, 42),
(13116, 19, '2024-10-28 00:00:00.000000', 2, 39),
(13117, 10, '2024-10-15 00:00:00.000000', 2, 40),
(13118, 10, '2024-10-06 00:00:00.000000', 2, 37),
(13119, 20, '2024-10-24 00:00:00.000000', 2, 42),
(13120, 7, '2024-10-16 00:00:00.000000', 2, 46),
(13121, 8, '2024-11-10 00:00:00.000000', 2, 42),
(13122, 7, '2024-11-27 00:00:00.000000', 2, 38),
(13123, 20, '2024-11-23 00:00:00.000000', 2, 38),
(13124, 19, '2024-11-17 00:00:00.000000', 2, 43),
(13125, 2, '2024-11-14 00:00:00.000000', 2, 39),
(13126, 12, '2024-11-10 00:00:00.000000', 2, 41),
(13127, 14, '2024-11-01 00:00:00.000000', 2, 44),
(13128, 12, '2024-11-16 00:00:00.000000', 2, 37),
(13129, 7, '2024-11-18 00:00:00.000000', 2, 38),
(13130, 18, '2024-11-15 00:00:00.000000', 2, 40),
(13131, 10, '2024-11-12 00:00:00.000000', 2, 41),
(13132, 11, '2024-11-22 00:00:00.000000', 2, 40),
(13133, 5, '2024-11-25 00:00:00.000000', 2, 45),
(13134, 4, '2024-11-24 00:00:00.000000', 2, 42),
(13135, 12, '2024-11-27 00:00:00.000000', 2, 45),
(13136, 17, '2024-11-01 00:00:00.000000', 2, 38),
(13137, 17, '2024-11-22 00:00:00.000000', 2, 44),
(13138, 7, '2024-11-22 00:00:00.000000', 2, 37),
(13139, 20, '2024-11-11 00:00:00.000000', 2, 43),
(13140, 11, '2024-11-13 00:00:00.000000', 2, 37),
(13141, 17, '2024-12-01 00:00:00.000000', 2, 39),
(13142, 4, '2024-12-28 00:00:00.000000', 2, 38),
(13143, 3, '2024-12-10 00:00:00.000000', 2, 44),
(13144, 3, '2024-12-02 00:00:00.000000', 2, 41),
(13145, 12, '2024-12-10 00:00:00.000000', 2, 40),
(13146, 10, '2024-12-01 00:00:00.000000', 2, 43),
(13147, 9, '2024-12-19 00:00:00.000000', 2, 40),
(13148, 13, '2024-12-20 00:00:00.000000', 2, 39),
(13149, 1, '2024-12-23 00:00:00.000000', 2, 40),
(13150, 17, '2024-12-24 00:00:00.000000', 2, 37),
(13151, 2, '2024-12-22 00:00:00.000000', 2, 41),
(13152, 8, '2024-12-20 00:00:00.000000', 2, 44),
(13153, 6, '2024-12-06 00:00:00.000000', 2, 43),
(13154, 14, '2024-12-05 00:00:00.000000', 2, 37),
(13155, 2, '2024-12-01 00:00:00.000000', 2, 44),
(13156, 13, '2024-12-17 00:00:00.000000', 2, 41),
(13157, 12, '2024-12-05 00:00:00.000000', 2, 45),
(13158, 6, '2024-12-11 00:00:00.000000', 2, 37),
(13159, 16, '2024-12-17 00:00:00.000000', 2, 42),
(13160, 8, '2024-12-24 00:00:00.000000', 2, 41);

--
-- Disparadores `app_compra`
--
DELIMITER $$
CREATE TRIGGER `trg_delete_dimCompras` AFTER DELETE ON `app_compra` FOR EACH ROW BEGIN
    -- Eliminar el registro correspondiente en dimCompras
    DELETE FROM etl.dimCompras
    WHERE nom_libro = (SELECT p.nom_libro 
                       FROM dbacapstone.app_libro p
                       WHERE p.id = OLD.producto_id);

    -- Verificar si la fecha de compra aún tiene referencias en dimCompras, si no, eliminar de dimTiempoCompras
    IF NOT EXISTS (SELECT 1 FROM etl.dimCompras WHERE id_tiempo_compra = (SELECT id_tiempo_compra FROM etl.dimTiempoCompras WHERE fecha_compra = DATE(OLD.fecha_compra) LIMIT 1)) THEN
        DELETE FROM etl.dimTiempoCompras
        WHERE fecha_compra = DATE(OLD.fecha_compra);
    END IF;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `trg_fill_buffer_compras` AFTER INSERT ON `app_compra` FOR EACH ROW BEGIN
    DECLARE new_id_cliente INT;
    DECLARE new_id_tiempo INT;
    DECLARE new_id_compra INT;

    -- Verificar o insertar en etl.dimCliente usando cliente_id
    SET new_id_cliente = (SELECT id_cliente FROM etl.dimCliente WHERE email = (SELECT email FROM dbacapstone.app_customuser WHERE id = NEW.cliente_id LIMIT 1));
    IF new_id_cliente IS NULL THEN
        INSERT INTO etl.dimCliente (email, rut, first_name, last_name, telefono)
        SELECT email, rut, first_name, last_name, telefono
        FROM dbacapstone.app_customuser
        WHERE id = NEW.cliente_id;
        SET new_id_cliente = LAST_INSERT_ID();
    END IF;

    -- Verificar o insertar en etl.dimTiempoCompras
    SET new_id_tiempo = (SELECT id_tiempo_compra FROM etl.dimTiempoCompras WHERE fecha_compra = DATE(NEW.fecha_compra) LIMIT 1);
    IF new_id_tiempo IS NULL THEN
        INSERT INTO etl.dimTiempoCompras (fecha_compra, dia, mes, anio)
        VALUES (DATE(NEW.fecha_compra), DAY(NEW.fecha_compra), MONTH(NEW.fecha_compra), YEAR(NEW.fecha_compra));
        SET new_id_tiempo = LAST_INSERT_ID();
    END IF;

    -- Insertar en etl.dimCompras
    INSERT INTO etl.dimCompras (nom_libro, precio, stock_total_compras, cantidad_comprado, nombre_autor, nombre_genero, id_tiempo_compra)
    SELECT 
        l.nom_libro,
        l.precio,
        l.stock,
        NEW.cantidad,
        a.nombre_autor,
        g.nombre,
        new_id_tiempo
    FROM dbacapstone.app_libro l
    LEFT JOIN dbacapstone.app_autor a ON l.id_autor_id = a.id
    LEFT JOIN dbacapstone.app_generolib g ON l.id_genero_id = g.id
    WHERE l.id = NEW.producto_id;
    SET new_id_compra = LAST_INSERT_ID();

    -- Insertar en etl.hechos_buffer
    INSERT INTO etl.hechos_buffer (id_compra, id_arriendo, id_cliente, id_estado_devolucion)
    VALUES (new_id_compra, NULL, new_id_cliente, NULL);
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `trg_update_dimCompras` AFTER UPDATE ON `app_compra` FOR EACH ROW BEGIN
    DECLARE id_tiempo INT;

    -- Verificar si ya existe el id_tiempo_compra en dimTiempoCompras para la fecha de compra actualizada
    SET id_tiempo = (SELECT id_tiempo_compra FROM etl.dimTiempoCompras WHERE fecha_compra = DATE(NEW.fecha_compra) LIMIT 1);

    -- Si no existe, insertar una nueva entrada en dimTiempoCompras
    IF id_tiempo IS NULL THEN
        INSERT INTO etl.dimTiempoCompras (fecha_compra, dia, mes, anio)
        VALUES (DATE(NEW.fecha_compra), DAY(NEW.fecha_compra), MONTH(NEW.fecha_compra), YEAR(NEW.fecha_compra));

        SET id_tiempo = LAST_INSERT_ID(); -- Obtén el id_tiempo_compra recién insertado
    END IF;

    -- Actualizar el registro en dimCompras relacionado con el producto modificado
    UPDATE etl.dimCompras
    SET 
        cantidad_comprado = NEW.cantidad,
        id_tiempo_compra = id_tiempo
    WHERE 
        id_tiempo_compra = (SELECT id_tiempo_compra FROM etl.dimTiempoCompras WHERE fecha_compra = DATE(OLD.fecha_compra) LIMIT 1)
        AND nom_libro = (SELECT p.nom_libro 
                        FROM dbacapstone.app_libro p
                        WHERE p.id = NEW.producto_id);
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `trigger_update_cliente_compra` AFTER UPDATE ON `app_compra` FOR EACH ROW BEGIN
    -- Actualizar cliente en dimCliente si hay cambios en app_compra
    UPDATE etl.dimCliente
    SET 
        email = (SELECT email FROM dbacapstone.app_customuser WHERE id = NEW.cliente_id),
        rut = (SELECT rut FROM dbacapstone.app_customuser WHERE id = NEW.cliente_id),
        first_name = (SELECT first_name FROM dbacapstone.app_customuser WHERE id = NEW.cliente_id),
        last_name = (SELECT last_name FROM dbacapstone.app_customuser WHERE id = NEW.cliente_id),
        telefono = (SELECT telefono FROM dbacapstone.app_customuser WHERE id = NEW.cliente_id)
    WHERE id_cliente = NEW.cliente_id;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `app_customuser`
--

CREATE TABLE `app_customuser` (
  `id` bigint(20) NOT NULL,
  `password` varchar(128) NOT NULL,
  `last_login` datetime(6) DEFAULT NULL,
  `is_superuser` tinyint(1) NOT NULL,
  `email` varchar(254) NOT NULL,
  `rut` varchar(50) DEFAULT NULL,
  `first_name` varchar(150) NOT NULL,
  `last_name` varchar(150) NOT NULL,
  `telefono` int(11) DEFAULT NULL,
  `fechanac` date DEFAULT NULL,
  `direccion` varchar(100) DEFAULT NULL,
  `is_staff` tinyint(1) NOT NULL,
  `is_active` tinyint(1) NOT NULL,
  `date_joined` datetime(6) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `app_customuser`
--

INSERT INTO `app_customuser` (`id`, `password`, `last_login`, `is_superuser`, `email`, `rut`, `first_name`, `last_name`, `telefono`, `fechanac`, `direccion`, `is_staff`, `is_active`, `date_joined`) VALUES
(1, 'pbkdf2_sha256$260000$Db9aTyD5xBSBpeNXWQicjJ$UMQ755RyyNpHh0V3vCuwWB1M+M5IffkPB55KGF0NFBU=', '2024-11-18 14:14:32.920330', 1, 'admin@admin.cl', NULL, 'admin', 'adminna', 1234567812, '2024-11-12', 'Noneaaaaaaaaaa', 1, 1, '2024-10-12 01:00:40.080086'),
(2, 'pbkdf2_sha256$260000$Db9aTyD5xBSBpeNXWQicjJ$UMQ755RyyNpHh0V3vCuwWB1M+M5IffkPB55KGF0NFBU=', '2024-11-05 16:41:29.000000', 0, 'arenteros@gmail.com', '121556952', 'Javier', 'Contreras', 939469993, '1998-02-12', 'Miguel Angel 3212', 0, 1, '2024-11-07 16:41:29.000000');

--
-- Disparadores `app_customuser`
--
DELIMITER $$
CREATE TRIGGER `trigger_update_cliente_customuser` AFTER UPDATE ON `app_customuser` FOR EACH ROW BEGIN
    -- Actualizar cliente en dimCliente si hay cambios en app_customuser
    UPDATE etl.dimCliente
    SET 
        email = NEW.email,
        rut = NEW.rut,
        first_name = NEW.first_name,
        last_name = NEW.last_name,
        telefono = NEW.telefono
    WHERE id_cliente = NEW.id;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `app_customuser_groups`
--

CREATE TABLE `app_customuser_groups` (
  `id` bigint(20) NOT NULL,
  `customuser_id` bigint(20) NOT NULL,
  `group_id` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `app_customuser_user_permissions`
--

CREATE TABLE `app_customuser_user_permissions` (
  `id` bigint(20) NOT NULL,
  `customuser_id` bigint(20) NOT NULL,
  `permission_id` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `app_generolib`
--

CREATE TABLE `app_generolib` (
  `id` bigint(20) NOT NULL,
  `nombre` varchar(200) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `app_generolib`
--

INSERT INTO `app_generolib` (`id`, `nombre`) VALUES
(8, 'Realismo Mágico'),
(9, 'Ficción Histórica'),
(10, 'Cuento Filosófico'),
(11, 'Novela Social'),
(12, 'Poesía'),
(13, 'Poesía Romántica'),
(14, 'Ensayo'),
(15, 'Ficción Experimental'),
(16, 'Literatura Contemporánea'),
(17, 'Novela Romántica');

--
-- Disparadores `app_generolib`
--
DELIMITER $$
CREATE TRIGGER `trg_update_genero_on_update` AFTER UPDATE ON `app_generolib` FOR EACH ROW BEGIN
    -- Actualizar el nombre del género en dimCompras
    UPDATE etl.dimCompras
    SET
        nombre_genero = NEW.nombre
    WHERE
        nombre_genero = OLD.nombre;

    -- Actualizar el nombre del género en dimArriendos
    UPDATE etl.dimArriendos
    SET
        nombre_genero = NEW.nombre
    WHERE
        nombre_genero = OLD.nombre;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `app_itemcarrito`
--

CREATE TABLE `app_itemcarrito` (
  `id` bigint(20) NOT NULL,
  `cantidad` int(11) NOT NULL,
  `carrito_id` bigint(20) NOT NULL,
  `producto_id` bigint(20) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `app_libro`
--

CREATE TABLE `app_libro` (
  `id` bigint(20) NOT NULL,
  `nom_libro` varchar(255) NOT NULL,
  `precio` int(11) NOT NULL,
  `stock` int(11) NOT NULL,
  `imagen` varchar(500) DEFAULT NULL,
  `id_autor_id` bigint(20) DEFAULT NULL,
  `id_genero_id` bigint(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `app_libro`
--

INSERT INTO `app_libro` (`id`, `nom_libro`, `precio`, `stock`, `imagen`, `id_autor_id`, `id_genero_id`) VALUES
(37, 'Ficciones', 13990, 10, 'https://drive.google.com/file/d/1j46jVmdLKt6wKCB1BhgbyuDUErn5Nuts/view?usp=drivesdk', 93, 10),
(38, 'Cien Años de Soledad', 10990, 30, 'https://drive.google.com/file/d/1zR6X_B7zZ7sQTZvKpfh5otnN3Y-ogaLu/view?usp=drivesdk', 91, 8),
(39, 'La Casa de los Espiritus', 20990, 70, 'https://drive.google.com/file/d/1QWTavar8yKMfgm75bG2Rh6c4oxFtsGYs/view?usp=drivesdk', 92, 9),
(40, 'La Ciudad y Los Perros', 27990, 10, 'https://drive.google.com/file/d/1hoDpXuUN0rqJtiFPZyvooJyGeiAq7UFC/view?usp=drivesdk', 94, 11),
(41, 'El Laberinto de la Soledad', 13990, 20, 'https://drive.google.com/file/d/1bB1PmHtvpxR_39fuLq66xPkYUS-gxZeu/view?usp=drivesdk', 95, 12),
(42, 'Veinte Poemas de Amor y una Cancion Desesperada', 9990, 20, 'https://drive.google.com/file/d/1MgHFuPSZufd24QhxSDCHYwSbjSHgtpU_/view?usp=drivesdk', 96, 13),
(43, 'La Region Mas Transparente', 15990, 50, 'https://drive.google.com/file/d/1lVHGxY4W4Yu1sNS7qtcecVMjVf-KYNCd/view?usp=drivesdk', 97, 14),
(44, 'Rayuela', 11990, 60, 'https://drive.google.com/file/d/1UNYg0ogeO0U_lNgEQkN-R2YjY3itAzEK/view?usp=drivesdk', 98, 15),
(45, 'Los Detectives Salvajes', 11990, 10, 'https://drive.google.com/file/d/1FvwHaElmAd36e2gqTLFHf2mLqvOOiyx4/view?usp=drivesdk', 99, 16),
(46, 'Como Agua Para Chocolate', 12990, 10, 'https://drive.google.com/file/d/10bbiHcU8CCGtVTibXq5PC3zuLUvL85t8/view?usp=drivesdk', 100, 17);

--
-- Disparadores `app_libro`
--
DELIMITER $$
CREATE TRIGGER `trg_update_dimLibros` AFTER UPDATE ON `app_libro` FOR EACH ROW BEGIN
    -- Actualizar los datos del libro en dimCompras
    UPDATE etl.dimCompras
    SET
        nom_libro = NEW.nom_libro,
        precio = NEW.precio,
        stock_total_compras = NEW.stock,
        nombre_autor = (SELECT a.nombre_autor FROM dbacapstone.app_autor a WHERE a.id = NEW.id_autor_id),
        nombre_genero = (SELECT g.nombre FROM dbacapstone.app_generolib g WHERE g.id = NEW.id_genero_id)
    WHERE
        nom_libro = OLD.nom_libro;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `app_libroarr`
--

CREATE TABLE `app_libroarr` (
  `id` bigint(20) NOT NULL,
  `nom_libro` varchar(255) NOT NULL,
  `stock` int(11) NOT NULL,
  `imagen` varchar(100) DEFAULT NULL,
  `id_autor_id` bigint(20) DEFAULT NULL,
  `id_genero_id` bigint(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `app_libroarr`
--

INSERT INTO `app_libroarr` (`id`, `nom_libro`, `stock`, `imagen`, `id_autor_id`, `id_genero_id`) VALUES
(12, 'Cien Años de Soledad', 20, 'https://drive.google.com/file/d/15DZzgBlEQ6kKy0Xn_6bGOVCWEJEQOqmV/view?usp=drivesdk', 91, 8),
(13, 'La Casa de los Espiritus', 50, 'https://drive.google.com/file/d/1aRt-Rs8nfBlO1IItRT1KKQkIb7REesSt/view?usp=drivesdk', 92, 9),
(14, 'Ficciones', 15, 'https://drive.google.com/file/d/1jkY4PKd7AN6xWr_jSQT7jkAe3FJTSUxk/view?usp=drivesdk', 93, 10),
(15, 'La Ciudad y Los Perros', 23, 'https://drive.google.com/file/d/1gxiyMhNMHiEUmjQC93XUCDA4pRltgvkF/view?usp=drivesdk', 94, 11),
(16, 'El Laberinto de la Soledad', 80, 'https://drive.google.com/file/d/13nMwmKXMEXt8lisyfP_JNh6cz5T4k4N2/view?usp=drivesdk', 95, 12),
(17, 'Veinta Poemas de Amor y una Cancion Desesperada', 56, 'https://drive.google.com/file/d/1jn-3xmwZS47vg4OdF3ePSqL6KSCJWfn4/view?usp=drivesdk', 96, 13),
(18, 'La Region Mas Transparente', 38, 'https://drive.google.com/file/d/1IWTcyQUCebYcyL6jNcVjyzuHWONFOOCD/view?usp=drivesdk', 97, 13),
(19, 'Rayuela', 23, 'https://drive.google.com/file/d/1_OjLUyKuNSOg35FioiPBc79Xky40qxbB/view?usp=drivesdk', 98, 15),
(20, 'Los Detectives Salvajes', 30, 'https://drive.google.com/file/d/10-U6VpsXeFnNe0LBa6A3fIZqXPKKq06W/view?usp=drivesdk', 99, 16),
(21, 'Como Agua Para Chocolate', 67, 'https://drive.google.com/file/d/1AW9zd-QYk9US-26xEjaSyBhqyXJ3kGfj/view?usp=drivesdk', 100, 17);

--
-- Disparadores `app_libroarr`
--
DELIMITER $$
CREATE TRIGGER `trg_update_dimArriendos_on_libroarr_update` AFTER UPDATE ON `app_libroarr` FOR EACH ROW BEGIN
    -- Actualizar los datos en dimArriendos
    UPDATE etl.dimArriendos
    SET
        nom_libro = NEW.nom_libro,
        nombre_autor = (SELECT a.nombre_autor FROM dbacapstone.app_autor a WHERE a.id = NEW.id_autor_id),
        nombre_genero = (SELECT g.nombre FROM dbacapstone.app_generolib g WHERE g.id = NEW.id_genero_id),
        stock_total_arriendo = NEW.stock
    WHERE
        nom_libro = OLD.nom_libro;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `trg_update_dimCompras_on_update` AFTER UPDATE ON `app_libroarr` FOR EACH ROW BEGIN
    -- Actualizar los datos en dimCompras
    UPDATE etl.dimCompras
    SET
        nom_libro = NEW.nom_libro,
        stock_total_compras = NEW.stock,
        nombre_autor = (SELECT a.nombre_autor FROM dbacapstone.app_autor a WHERE a.id = NEW.id_autor_id),
        nombre_genero = (SELECT g.nombre FROM dbacapstone.app_generolib g WHERE g.id = NEW.id_genero_id)
    WHERE
        nom_libro = OLD.nom_libro;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `app_sub`
--

CREATE TABLE `app_sub` (
  `id` bigint(20) NOT NULL,
  `fecha_inicio` date NOT NULL,
  `id_ts_id` bigint(20) DEFAULT NULL,
  `id_us_id` bigint(20) DEFAULT NULL,
  `invalida` tinyint(1) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `app_sub`
--

INSERT INTO `app_sub` (`id`, `fecha_inicio`, `id_ts_id`, `id_us_id`, `invalida`) VALUES
(1, '2024-10-12', 3, 1, NULL),
(2, '2024-11-17', 3, 1, 0);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `app_subscripcion`
--

CREATE TABLE `app_subscripcion` (
  `id` bigint(20) NOT NULL,
  `nom_sus` varchar(100) NOT NULL,
  `dcto` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `app_tiposubcripscion`
--

CREATE TABLE `app_tiposubcripscion` (
  `id` bigint(20) NOT NULL,
  `nombre` varchar(255) NOT NULL,
  `precio` int(11) NOT NULL,
  `dcto` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `app_tiposubcripscion`
--

INSERT INTO `app_tiposubcripscion` (`id`, `nombre`, `precio`, `dcto`) VALUES
(1, 'Basica', 4500, 0),
(2, 'Completa', 5500, 10),
(3, 'Ultra', 6500, 20);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `app_usersub`
--

CREATE TABLE `app_usersub` (
  `id` bigint(20) NOT NULL,
  `id_Sub_id` bigint(20) DEFAULT NULL,
  `id_usuario_id` bigint(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `auth_group`
--

CREATE TABLE `auth_group` (
  `id` int(11) NOT NULL,
  `name` varchar(150) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `auth_group_permissions`
--

CREATE TABLE `auth_group_permissions` (
  `id` bigint(20) NOT NULL,
  `group_id` int(11) NOT NULL,
  `permission_id` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `auth_permission`
--

CREATE TABLE `auth_permission` (
  `id` int(11) NOT NULL,
  `name` varchar(255) NOT NULL,
  `content_type_id` int(11) NOT NULL,
  `codename` varchar(100) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `auth_permission`
--

INSERT INTO `auth_permission` (`id`, `name`, `content_type_id`, `codename`) VALUES
(1, 'Can add log entry', 1, 'add_logentry'),
(2, 'Can change log entry', 1, 'change_logentry'),
(3, 'Can delete log entry', 1, 'delete_logentry'),
(4, 'Can view log entry', 1, 'view_logentry'),
(5, 'Can add permission', 2, 'add_permission'),
(6, 'Can change permission', 2, 'change_permission'),
(7, 'Can delete permission', 2, 'delete_permission'),
(8, 'Can view permission', 2, 'view_permission'),
(9, 'Can add group', 3, 'add_group'),
(10, 'Can change group', 3, 'change_group'),
(11, 'Can delete group', 3, 'delete_group'),
(12, 'Can view group', 3, 'view_group'),
(13, 'Can add content type', 4, 'add_contenttype'),
(14, 'Can change content type', 4, 'change_contenttype'),
(15, 'Can delete content type', 4, 'delete_contenttype'),
(16, 'Can view content type', 4, 'view_contenttype'),
(17, 'Can add session', 5, 'add_session'),
(18, 'Can change session', 5, 'change_session'),
(19, 'Can delete session', 5, 'delete_session'),
(20, 'Can view session', 5, 'view_session'),
(21, 'Can add custom user', 6, 'add_customuser'),
(22, 'Can change custom user', 6, 'change_customuser'),
(23, 'Can delete custom user', 6, 'delete_customuser'),
(24, 'Can view custom user', 6, 'view_customuser'),
(25, 'Can add arriendo', 7, 'add_arriendo'),
(26, 'Can change arriendo', 7, 'change_arriendo'),
(27, 'Can delete arriendo', 7, 'delete_arriendo'),
(28, 'Can view arriendo', 7, 'view_arriendo'),
(29, 'Can add autor', 8, 'add_autor'),
(30, 'Can change autor', 8, 'change_autor'),
(31, 'Can delete autor', 8, 'delete_autor'),
(32, 'Can view autor', 8, 'view_autor'),
(33, 'Can add carrito', 9, 'add_carrito'),
(34, 'Can change carrito', 9, 'change_carrito'),
(35, 'Can delete carrito', 9, 'delete_carrito'),
(36, 'Can view carrito', 9, 'view_carrito'),
(37, 'Can add genero lib', 10, 'add_generolib'),
(38, 'Can change genero lib', 10, 'change_generolib'),
(39, 'Can delete genero lib', 10, 'delete_generolib'),
(40, 'Can view genero lib', 10, 'view_generolib'),
(41, 'Can add subscripcion', 11, 'add_subscripcion'),
(42, 'Can change subscripcion', 11, 'change_subscripcion'),
(43, 'Can delete subscripcion', 11, 'delete_subscripcion'),
(44, 'Can view subscripcion', 11, 'view_subscripcion'),
(45, 'Can add tipo subcripscion', 12, 'add_tiposubcripscion'),
(46, 'Can change tipo subcripscion', 12, 'change_tiposubcripscion'),
(47, 'Can delete tipo subcripscion', 12, 'delete_tiposubcripscion'),
(48, 'Can view tipo subcripscion', 12, 'view_tiposubcripscion'),
(49, 'Can add user sub', 13, 'add_usersub'),
(50, 'Can change user sub', 13, 'change_usersub'),
(51, 'Can delete user sub', 13, 'delete_usersub'),
(52, 'Can view user sub', 13, 'view_usersub'),
(53, 'Can add sub', 14, 'add_sub'),
(54, 'Can change sub', 14, 'change_sub'),
(55, 'Can delete sub', 14, 'delete_sub'),
(56, 'Can view sub', 14, 'view_sub'),
(57, 'Can add libro arr', 15, 'add_libroarr'),
(58, 'Can change libro arr', 15, 'change_libroarr'),
(59, 'Can delete libro arr', 15, 'delete_libroarr'),
(60, 'Can view libro arr', 15, 'view_libroarr'),
(61, 'Can add libro', 16, 'add_libro'),
(62, 'Can change libro', 16, 'change_libro'),
(63, 'Can delete libro', 16, 'delete_libro'),
(64, 'Can view libro', 16, 'view_libro'),
(65, 'Can add item carrito', 17, 'add_itemcarrito'),
(66, 'Can change item carrito', 17, 'change_itemcarrito'),
(67, 'Can delete item carrito', 17, 'delete_itemcarrito'),
(68, 'Can view item carrito', 17, 'view_itemcarrito'),
(69, 'Can add item arriendo', 18, 'add_itemarriendo'),
(70, 'Can change item arriendo', 18, 'change_itemarriendo'),
(71, 'Can delete item arriendo', 18, 'delete_itemarriendo'),
(72, 'Can view item arriendo', 18, 'view_itemarriendo'),
(73, 'Can add compra', 19, 'add_compra'),
(74, 'Can change compra', 19, 'change_compra'),
(75, 'Can delete compra', 19, 'delete_compra'),
(76, 'Can view compra', 19, 'view_compra'),
(77, 'Can add Theme', 20, 'add_theme'),
(78, 'Can change Theme', 20, 'change_theme'),
(79, 'Can delete Theme', 20, 'delete_theme'),
(80, 'Can view Theme', 20, 'view_theme');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `django_admin_log`
--

CREATE TABLE `django_admin_log` (
  `id` int(11) NOT NULL,
  `action_time` datetime(6) NOT NULL,
  `object_id` longtext DEFAULT NULL,
  `object_repr` varchar(200) NOT NULL,
  `action_flag` smallint(5) UNSIGNED NOT NULL CHECK (`action_flag` >= 0),
  `change_message` longtext NOT NULL,
  `content_type_id` int(11) DEFAULT NULL,
  `user_id` bigint(20) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `django_admin_log`
--

INSERT INTO `django_admin_log` (`id`, `action_time`, `object_id`, `object_repr`, `action_flag`, `change_message`, `content_type_id`, `user_id`) VALUES
(1, '2024-10-12 01:01:23.133013', '1', 'Comedia', 1, '[{\"added\": {}}]', 10, 1),
(2, '2024-10-12 01:01:32.411522', '1', 'Pablo peruda', 1, '[{\"added\": {}}]', 8, 1),
(3, '2024-10-12 01:01:55.990034', '1', 'Prueba1', 1, '[{\"added\": {}}]', 16, 1),
(4, '2024-10-12 01:02:12.285489', '1', 'Basica', 1, '[{\"added\": {}}]', 12, 1),
(5, '2024-10-12 01:02:19.411083', '2', 'Completa', 1, '[{\"added\": {}}]', 12, 1),
(6, '2024-10-12 01:02:26.615517', '3', 'Ultra', 1, '[{\"added\": {}}]', 12, 1),
(7, '2024-10-12 01:02:43.368174', '1', 'PruebaArr1', 1, '[{\"added\": {}}]', 15, 1),
(8, '2024-10-14 20:40:36.785843', '2', 'Suzanne Collins', 1, '[{\"added\": {}}]', 8, 1),
(9, '2024-10-14 20:41:27.257050', '3', 'George R. R. Martin', 1, '[{\"added\": {}}]', 8, 1),
(10, '2024-10-14 20:41:53.050150', '4', 'J. K. Rowling', 1, '[{\"added\": {}}]', 8, 1),
(11, '2024-10-14 20:42:55.326476', '5', 'LaRousse', 1, '[{\"added\": {}}]', 8, 1),
(12, '2024-10-14 20:44:23.852826', '6', 'Wolfgang Amadeus Mozart', 1, '[{\"added\": {}}]', 8, 1),
(13, '2024-10-14 20:45:06.342867', '7', 'Mario Amorós', 1, '[{\"added\": {}}]', 8, 1),
(14, '2024-10-14 20:46:01.176083', '2', 'Ciencia ficción', 1, '[{\"added\": {}}]', 10, 1),
(15, '2024-10-14 20:46:28.076442', '3', 'Acción', 1, '[{\"added\": {}}]', 10, 1),
(16, '2024-10-14 20:46:54.963011', '4', 'Fantasía', 1, '[{\"added\": {}}]', 10, 1),
(17, '2024-10-14 20:48:22.988883', '5', 'Libros de referencia', 1, '[{\"added\": {}}]', 10, 1),
(18, '2024-10-14 20:50:02.449396', '6', 'Jean Blot', 2, '[{\"changed\": {\"fields\": [\"Nombre autor\"]}}]', 8, 1),
(19, '2024-10-14 20:50:08.134914', '6', 'Jean Blot', 2, '[]', 8, 1),
(20, '2024-10-14 20:50:55.560595', '6', 'biografía', 1, '[{\"added\": {}}]', 10, 1),
(21, '2024-10-14 20:53:04.915560', '8', 'Lesley-Ann Jones', 1, '[{\"added\": {}}]', 8, 1),
(22, '2024-10-14 20:53:40.813437', '7', 'Politica', 1, '[{\"added\": {}}]', 10, 1),
(23, '2024-10-14 21:07:14.717829', '1', 'PruebaArr1', 3, '', 15, 1),
(24, '2024-10-14 21:07:56.349663', '2', 'Los Juegos Del Hambre', 1, '[{\"added\": {}}]', 15, 1),
(25, '2024-10-14 21:08:29.707901', '3', 'Juego de Tronos', 1, '[{\"added\": {}}]', 15, 1);

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `django_content_type`
--

CREATE TABLE `django_content_type` (
  `id` int(11) NOT NULL,
  `app_label` varchar(100) NOT NULL,
  `model` varchar(100) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `django_content_type`
--

INSERT INTO `django_content_type` (`id`, `app_label`, `model`) VALUES
(1, 'admin', 'logentry'),
(20, 'admin_interface', 'theme'),
(7, 'app', 'arriendo'),
(8, 'app', 'autor'),
(9, 'app', 'carrito'),
(19, 'app', 'compra'),
(6, 'app', 'customuser'),
(10, 'app', 'generolib'),
(18, 'app', 'itemarriendo'),
(17, 'app', 'itemcarrito'),
(16, 'app', 'libro'),
(15, 'app', 'libroarr'),
(14, 'app', 'sub'),
(11, 'app', 'subscripcion'),
(12, 'app', 'tiposubcripscion'),
(13, 'app', 'usersub'),
(3, 'auth', 'group'),
(2, 'auth', 'permission'),
(4, 'contenttypes', 'contenttype'),
(5, 'sessions', 'session');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `django_migrations`
--

CREATE TABLE `django_migrations` (
  `id` bigint(20) NOT NULL,
  `app` varchar(255) NOT NULL,
  `name` varchar(255) NOT NULL,
  `applied` datetime(6) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `django_migrations`
--

INSERT INTO `django_migrations` (`id`, `app`, `name`, `applied`) VALUES
(1, 'contenttypes', '0001_initial', '2024-10-12 00:59:25.014843'),
(2, 'contenttypes', '0002_remove_content_type_name', '2024-10-12 00:59:25.077676'),
(3, 'auth', '0001_initial', '2024-10-12 00:59:25.300220'),
(4, 'auth', '0002_alter_permission_name_max_length', '2024-10-12 00:59:25.357037'),
(5, 'auth', '0003_alter_user_email_max_length', '2024-10-12 00:59:25.365033'),
(6, 'auth', '0004_alter_user_username_opts', '2024-10-12 00:59:25.372017'),
(7, 'auth', '0005_alter_user_last_login_null', '2024-10-12 00:59:25.381448'),
(8, 'auth', '0006_require_contenttypes_0002', '2024-10-12 00:59:25.384859'),
(9, 'auth', '0007_alter_validators_add_error_messages', '2024-10-12 00:59:25.393849'),
(10, 'auth', '0008_alter_user_username_max_length', '2024-10-12 00:59:25.400816'),
(11, 'auth', '0009_alter_user_last_name_max_length', '2024-10-12 00:59:25.409792'),
(12, 'auth', '0010_alter_group_name_max_length', '2024-10-12 00:59:25.420761'),
(13, 'auth', '0011_update_proxy_permissions', '2024-10-12 00:59:25.430942'),
(14, 'auth', '0012_alter_user_first_name_max_length', '2024-10-12 00:59:25.437750'),
(15, 'app', '0001_initial', '2024-10-12 00:59:26.940342'),
(16, 'admin', '0001_initial', '2024-10-12 00:59:27.072160'),
(17, 'admin', '0002_logentry_remove_auto_add', '2024-10-12 00:59:27.090112'),
(18, 'admin', '0003_logentry_add_action_flag_choices', '2024-10-12 00:59:27.113480'),
(19, 'admin_interface', '0001_initial', '2024-10-12 00:59:27.136439'),
(20, 'admin_interface', '0002_add_related_modal', '2024-10-12 00:59:27.199281'),
(21, 'admin_interface', '0003_add_logo_color', '2024-10-12 00:59:27.224891'),
(22, 'admin_interface', '0004_rename_title_color', '2024-10-12 00:59:27.242479'),
(23, 'admin_interface', '0005_add_recent_actions_visible', '2024-10-12 00:59:27.262426'),
(24, 'admin_interface', '0006_bytes_to_str', '2024-10-12 00:59:27.338578'),
(25, 'admin_interface', '0007_add_favicon', '2024-10-12 00:59:27.360542'),
(26, 'admin_interface', '0008_change_related_modal_background_opacity_type', '2024-10-12 00:59:27.396486'),
(27, 'admin_interface', '0009_add_enviroment', '2024-10-12 00:59:27.433141'),
(28, 'admin_interface', '0010_add_localization', '2024-10-12 00:59:27.460054'),
(29, 'admin_interface', '0011_add_environment_options', '2024-10-12 00:59:27.531009'),
(30, 'admin_interface', '0012_update_verbose_names', '2024-10-12 00:59:27.545652'),
(31, 'admin_interface', '0013_add_related_modal_close_button', '2024-10-12 00:59:27.569017'),
(32, 'admin_interface', '0014_name_unique', '2024-10-12 00:59:27.597517'),
(33, 'admin_interface', '0015_add_language_chooser_active', '2024-10-12 00:59:27.621418'),
(34, 'admin_interface', '0016_add_language_chooser_display', '2024-10-12 00:59:27.643433'),
(35, 'admin_interface', '0017_change_list_filter_dropdown', '2024-10-12 00:59:27.656033'),
(36, 'admin_interface', '0018_theme_list_filter_sticky', '2024-10-12 00:59:27.678875'),
(37, 'admin_interface', '0019_add_form_sticky', '2024-10-12 00:59:27.714991'),
(38, 'admin_interface', '0020_module_selected_colors', '2024-10-12 00:59:27.813044'),
(39, 'admin_interface', '0021_file_extension_validator', '2024-10-12 00:59:27.830237'),
(40, 'admin_interface', '0022_add_logo_max_width_and_height', '2024-10-12 00:59:27.870539'),
(41, 'admin_interface', '0023_theme_foldable_apps', '2024-10-12 00:59:27.895626'),
(42, 'admin_interface', '0024_remove_theme_css', '2024-10-12 00:59:27.937604'),
(43, 'admin_interface', '0025_theme_language_chooser_control', '2024-10-12 00:59:27.958874'),
(44, 'admin_interface', '0026_theme_list_filter_highlight', '2024-10-12 00:59:27.985767'),
(45, 'admin_interface', '0027_theme_list_filter_removal_links', '2024-10-12 00:59:28.010338'),
(46, 'admin_interface', '0028_theme_show_fieldsets_as_tabs_and_more', '2024-10-12 00:59:28.047401'),
(47, 'admin_interface', '0029_theme_css_generic_link_active_color', '2024-10-12 00:59:28.070635'),
(48, 'sessions', '0001_initial', '2024-10-12 00:59:28.109077'),
(49, 'admin_interface', '0030_theme_collapsible_stacked_inlines_and_more', '2024-11-07 01:54:22.795892');

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `django_session`
--

CREATE TABLE `django_session` (
  `session_key` varchar(40) NOT NULL,
  `session_data` longtext NOT NULL,
  `expire_date` datetime(6) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Volcado de datos para la tabla `django_session`
--

INSERT INTO `django_session` (`session_key`, `session_data`, `expire_date`) VALUES
('0996oydymcrs4v3l60mimh2vitpcxyai', '.eJxVjEEOwiAQRe_C2pChhQFcuvcMZKYDUjVtUtqV8e7apAvd_vfef6lE21rT1vKSRlFnZbtenX5XpuGRpx3JnabbrId5WpeR9a7ogzZ9nSU_L4f7d1Cp1W9dPA3QixQ0EFmsEYcBfEHKACCWHaMP1rAFRILAHFyMhQBi6QCten8AMTE3zQ:1tD36y:VMZuV1S4bEWRdGKlKdvmbUWWYGWkUqG4hNKLZ4LnZZY', '2024-12-02 14:52:20.497858'),
('1m95fayih4acoscu0cy04s3ek70fo1ka', '.eJxVjMEOwiAQRP-FsyEgy4oevfcbGpbdStVAUtqT8d-VpAfN3Oa9mZca47bmcWuyjDOri7Lq8NtRTA8pHfA9llvVqZZ1mUl3Re-06aGyPK-7-3eQY8t97Y78jUN0BGTO4k9MwUJKPFmfxFtAw2AcAKENE7AwIkAMjAJJ1PsD3hI3-g:1t0Rr7:wqaTMWrW7U61kZHr_x4LSWsqwyAmxPmO1pLb_yiqKRw', '2024-10-28 20:39:53.018594'),
('dzroq500jkfp4v7h48udp4weeo40h0rw', '.eJxVjDEOAiEQRe9CbUhAZhBLe89AhmGQVQPJslsZ766bbKHtf-_9l4q0LjWuQ-Y4ZXVWRh1-t0T8kLaBfKd265p7W-Yp6U3ROx362rM8L7v7d1Bp1G8NFtEhl8IUBLw3XCyhBYfJAZ18dsdCYB0KSWCyUFI2LD7YUEIwrN4f6VI4Sw:1szQVH:uUqHQ2gky9Hc_FzWC2fFnVKENhN8kXUmwAGrJuU8p8A', '2024-10-26 01:01:07.244590'),
('essvjx47zmqm2gw0jew42xpznb2uo4wi', '.eJxVjEEOwiAQRe_C2pChHaG4dN8zkIEZpGpoUtqV8e7apAvd_vfef6lA21rC1mQJE6uLQoPq9LtGSg-pO-I71dus01zXZYp6V_RBmx5nluf1cP8OCrXyrVPqYsKzF0R0riNkn_MAToTRWp_jkAkwOgOC0oPxlggEXC82evCs3h88mjhz:1tCUf0:KsTHDtLQFrBklqoHZ4Rdehzo5qu9AQI0CKC3s9KAtk8', '2024-12-01 02:05:10.633137'),
('l0e5fp3vz8lf3ifem8d5jno4udfsgqyn', '.eJxVjEEOwiAQRe_C2pChhQFcuvcMZKYDUjVtUtqV8e7apAvd_vfef6lE21rT1vKSRlFnZbtenX5XpuGRpx3JnabbrId5WpeR9a7ogzZ9nSU_L4f7d1Cp1W9dPA3QixQ0EFmsEYcBfEHKACCWHaMP1rAFRILAHFyMhQBi6QCten8AMTE3zQ:1tD2XF:KuAqxAXAbfxoqWGRBIAL7elaZab07LbgkRYiwMugSbg', '2024-12-02 14:15:25.314191'),
('ofy20jtxnjysw5sq3rx44087lyxexly5', '.eJxVjEEOwiAURO_C2pCA_R906d4zkIFPpWogKe3KeHdt0oVu5703LxWwLiWsPc9hEnVWRh1-t4j0yHUDcke9NZ1aXeYp6k3RO-362iQ_L7v7d1DQy7dm8ICTeDsQKPl0dOyNQY6JJLJxIDcCiTlTZDJEGQI_2ggziLOi3h_uMDiL:1tCyiw:FH97Kwg_uswr0yHALy73yKoY2jeCoZvomnLe2gkp7rs', '2024-12-02 10:11:14.825702'),
('v3btbb8yc7jk9fz7abf1ck76zre41a6c', '.eJxVjEEOwiAURO_C2pCA_R906d4zkIFPpWogKe3KeHdt0oVu5703LxWwLiWsPc9hEnVWRh1-t4j0yHUDcke9NZ1aXeYp6k3RO-362iQ_L7v7d1DQy7dm8ICTeDsQKPl0dOyNQY6JJLJxIDcCiTlTZDJEGQI_2ggziLOi3h_uMDiL:1tCn7J:y_0vk08jeNISIhwjH96E-rc3YkveOfPijTIcUYDVSJg', '2024-12-01 21:47:37.232858'),
('wdu1j9geet5o9peste21rgn5c0mndibl', '.eJxVjMEOwiAQRP-FsyEgy4oevfcbGpbdStVAUtqT8d-VpAfN3Oa9mZca47bmcWuyjDOri7Lq8NtRTA8pHfA9llvVqZZ1mUl3Re-06aGyPK-7-3eQY8t97Y78jUN0BGTO4k9MwUJKPFmfxFtAw2AcAKENE7AwIkAMjAJJ1PsD3hI3-g:1tBPSC:7XPjfWCLDYzmDoe0ELY4PUHBLdb6PKIrTRTIZ4fovwg', '2024-11-28 02:19:28.740953');

--
-- Índices para tablas volcadas
--

--
-- Indices de la tabla `admin_interface_theme`
--
ALTER TABLE `admin_interface_theme`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `admin_interface_theme_name_30bda70f_uniq` (`name`);

--
-- Indices de la tabla `app_arriendo`
--
ALTER TABLE `app_arriendo`
  ADD PRIMARY KEY (`id`),
  ADD KEY `app_arriendo_cliente_id_45434d16_fk_app_customuser_id` (`cliente_id`),
  ADD KEY `app_arriendo_producto_id_24adbff7_fk_app_libroarr_id` (`producto_id`);

--
-- Indices de la tabla `app_autor`
--
ALTER TABLE `app_autor`
  ADD PRIMARY KEY (`id`);

--
-- Indices de la tabla `app_carrito`
--
ALTER TABLE `app_carrito`
  ADD PRIMARY KEY (`id`),
  ADD KEY `app_carrito_cliente_id_4321eb42_fk_app_customuser_id` (`cliente_id`);

--
-- Indices de la tabla `app_compra`
--
ALTER TABLE `app_compra`
  ADD PRIMARY KEY (`id`),
  ADD KEY `app_compra_cliente_id_66e2a9f0_fk_app_customuser_id` (`cliente_id`),
  ADD KEY `app_compra_producto_id_fada055c_fk_app_libro_id` (`producto_id`);

--
-- Indices de la tabla `app_customuser`
--
ALTER TABLE `app_customuser`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `email` (`email`);

--
-- Indices de la tabla `app_customuser_groups`
--
ALTER TABLE `app_customuser_groups`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `app_customuser_groups_customuser_id_group_id_a5a0ca22_uniq` (`customuser_id`,`group_id`),
  ADD KEY `app_customuser_groups_group_id_47e49ebd_fk_auth_group_id` (`group_id`);

--
-- Indices de la tabla `app_customuser_user_permissions`
--
ALTER TABLE `app_customuser_user_permissions`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `app_customuser_user_perm_customuser_id_permission_22e31019_uniq` (`customuser_id`,`permission_id`),
  ADD KEY `app_customuser_user__permission_id_c5920c75_fk_auth_perm` (`permission_id`);

--
-- Indices de la tabla `app_generolib`
--
ALTER TABLE `app_generolib`
  ADD PRIMARY KEY (`id`);

--
-- Indices de la tabla `app_itemcarrito`
--
ALTER TABLE `app_itemcarrito`
  ADD PRIMARY KEY (`id`),
  ADD KEY `app_itemcarrito_carrito_id_02f22e19_fk_app_carrito_id` (`carrito_id`),
  ADD KEY `app_itemcarrito_producto_id_4e2f7064_fk_app_libro_id` (`producto_id`);

--
-- Indices de la tabla `app_libro`
--
ALTER TABLE `app_libro`
  ADD PRIMARY KEY (`id`),
  ADD KEY `app_libro_id_autor_id_5d82464f_fk_app_autor_id` (`id_autor_id`),
  ADD KEY `app_libro_id_genero_id_59bb8c99_fk_app_generolib_id` (`id_genero_id`);

--
-- Indices de la tabla `app_libroarr`
--
ALTER TABLE `app_libroarr`
  ADD PRIMARY KEY (`id`),
  ADD KEY `app_libroarr_id_autor_id_fc2e6e08_fk_app_autor_id` (`id_autor_id`),
  ADD KEY `app_libroarr_id_genero_id_8e8ecfdd_fk_app_generolib_id` (`id_genero_id`);

--
-- Indices de la tabla `app_sub`
--
ALTER TABLE `app_sub`
  ADD PRIMARY KEY (`id`),
  ADD KEY `app_sub_id_ts_id_10c803ad_fk_app_tiposubcripscion_id` (`id_ts_id`),
  ADD KEY `app_sub_id_us_id_50e92fd2_fk_app_customuser_id` (`id_us_id`);

--
-- Indices de la tabla `app_subscripcion`
--
ALTER TABLE `app_subscripcion`
  ADD PRIMARY KEY (`id`);

--
-- Indices de la tabla `app_tiposubcripscion`
--
ALTER TABLE `app_tiposubcripscion`
  ADD PRIMARY KEY (`id`);

--
-- Indices de la tabla `app_usersub`
--
ALTER TABLE `app_usersub`
  ADD PRIMARY KEY (`id`),
  ADD KEY `app_usersub_id_Sub_id_c5516a41_fk_app_subscripcion_id` (`id_Sub_id`),
  ADD KEY `app_usersub_id_usuario_id_c4ddb2c4_fk_app_customuser_id` (`id_usuario_id`);

--
-- Indices de la tabla `auth_group`
--
ALTER TABLE `auth_group`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `name` (`name`);

--
-- Indices de la tabla `auth_group_permissions`
--
ALTER TABLE `auth_group_permissions`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` (`group_id`,`permission_id`),
  ADD KEY `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` (`permission_id`);

--
-- Indices de la tabla `auth_permission`
--
ALTER TABLE `auth_permission`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `auth_permission_content_type_id_codename_01ab375a_uniq` (`content_type_id`,`codename`);

--
-- Indices de la tabla `django_admin_log`
--
ALTER TABLE `django_admin_log`
  ADD PRIMARY KEY (`id`),
  ADD KEY `django_admin_log_content_type_id_c4bce8eb_fk_django_co` (`content_type_id`),
  ADD KEY `django_admin_log_user_id_c564eba6_fk_app_customuser_id` (`user_id`);

--
-- Indices de la tabla `django_content_type`
--
ALTER TABLE `django_content_type`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `django_content_type_app_label_model_76bd3d3b_uniq` (`app_label`,`model`);

--
-- Indices de la tabla `django_migrations`
--
ALTER TABLE `django_migrations`
  ADD PRIMARY KEY (`id`);

--
-- Indices de la tabla `django_session`
--
ALTER TABLE `django_session`
  ADD PRIMARY KEY (`session_key`),
  ADD KEY `django_session_expire_date_a5c62663` (`expire_date`);

--
-- AUTO_INCREMENT de las tablas volcadas
--

--
-- AUTO_INCREMENT de la tabla `admin_interface_theme`
--
ALTER TABLE `admin_interface_theme`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT de la tabla `app_arriendo`
--
ALTER TABLE `app_arriendo`
  MODIFY `id` bigint(20) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=123922;

--
-- AUTO_INCREMENT de la tabla `app_autor`
--
ALTER TABLE `app_autor`
  MODIFY `id` bigint(20) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=101;

--
-- AUTO_INCREMENT de la tabla `app_carrito`
--
ALTER TABLE `app_carrito`
  MODIFY `id` bigint(20) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=12;

--
-- AUTO_INCREMENT de la tabla `app_compra`
--
ALTER TABLE `app_compra`
  MODIFY `id` bigint(20) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=13161;

--
-- AUTO_INCREMENT de la tabla `app_customuser`
--
ALTER TABLE `app_customuser`
  MODIFY `id` bigint(20) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=427;

--
-- AUTO_INCREMENT de la tabla `app_customuser_groups`
--
ALTER TABLE `app_customuser_groups`
  MODIFY `id` bigint(20) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT de la tabla `app_customuser_user_permissions`
--
ALTER TABLE `app_customuser_user_permissions`
  MODIFY `id` bigint(20) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT de la tabla `app_generolib`
--
ALTER TABLE `app_generolib`
  MODIFY `id` bigint(20) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=18;

--
-- AUTO_INCREMENT de la tabla `app_itemcarrito`
--
ALTER TABLE `app_itemcarrito`
  MODIFY `id` bigint(20) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=536;

--
-- AUTO_INCREMENT de la tabla `app_libro`
--
ALTER TABLE `app_libro`
  MODIFY `id` bigint(20) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=47;

--
-- AUTO_INCREMENT de la tabla `app_libroarr`
--
ALTER TABLE `app_libroarr`
  MODIFY `id` bigint(20) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=22;

--
-- AUTO_INCREMENT de la tabla `app_sub`
--
ALTER TABLE `app_sub`
  MODIFY `id` bigint(20) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=6;

--
-- AUTO_INCREMENT de la tabla `app_subscripcion`
--
ALTER TABLE `app_subscripcion`
  MODIFY `id` bigint(20) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT de la tabla `app_tiposubcripscion`
--
ALTER TABLE `app_tiposubcripscion`
  MODIFY `id` bigint(20) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;

--
-- AUTO_INCREMENT de la tabla `app_usersub`
--
ALTER TABLE `app_usersub`
  MODIFY `id` bigint(20) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT de la tabla `auth_group`
--
ALTER TABLE `auth_group`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT de la tabla `auth_group_permissions`
--
ALTER TABLE `auth_group_permissions`
  MODIFY `id` bigint(20) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT de la tabla `auth_permission`
--
ALTER TABLE `auth_permission`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=81;

--
-- AUTO_INCREMENT de la tabla `django_admin_log`
--
ALTER TABLE `django_admin_log`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=26;

--
-- AUTO_INCREMENT de la tabla `django_content_type`
--
ALTER TABLE `django_content_type`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=21;

--
-- AUTO_INCREMENT de la tabla `django_migrations`
--
ALTER TABLE `django_migrations`
  MODIFY `id` bigint(20) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=50;

--
-- Restricciones para tablas volcadas
--

--
-- Filtros para la tabla `app_arriendo`
--
ALTER TABLE `app_arriendo`
  ADD CONSTRAINT `app_arriendo_cliente_id_45434d16_fk_app_customuser_id` FOREIGN KEY (`cliente_id`) REFERENCES `app_customuser` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `app_arriendo_producto_id_24adbff7_fk_app_libroarr_id` FOREIGN KEY (`producto_id`) REFERENCES `app_libroarr` (`id`) ON DELETE CASCADE;

--
-- Filtros para la tabla `app_carrito`
--
ALTER TABLE `app_carrito`
  ADD CONSTRAINT `app_carrito_cliente_id_4321eb42_fk_app_customuser_id` FOREIGN KEY (`cliente_id`) REFERENCES `app_customuser` (`id`) ON DELETE CASCADE;

--
-- Filtros para la tabla `app_compra`
--
ALTER TABLE `app_compra`
  ADD CONSTRAINT `app_compra_cliente_id_66e2a9f0_fk_app_customuser_id` FOREIGN KEY (`cliente_id`) REFERENCES `app_customuser` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `app_compra_producto_id_fada055c_fk_app_libro_id` FOREIGN KEY (`producto_id`) REFERENCES `app_libro` (`id`) ON DELETE CASCADE;

--
-- Filtros para la tabla `app_customuser_groups`
--
ALTER TABLE `app_customuser_groups`
  ADD CONSTRAINT `app_customuser_group_customuser_id_164d073f_fk_app_custo` FOREIGN KEY (`customuser_id`) REFERENCES `app_customuser` (`id`),
  ADD CONSTRAINT `app_customuser_groups_group_id_47e49ebd_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`);

--
-- Filtros para la tabla `app_customuser_user_permissions`
--
ALTER TABLE `app_customuser_user_permissions`
  ADD CONSTRAINT `app_customuser_user__customuser_id_4bcbaafb_fk_app_custo` FOREIGN KEY (`customuser_id`) REFERENCES `app_customuser` (`id`),
  ADD CONSTRAINT `app_customuser_user__permission_id_c5920c75_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`);

--
-- Filtros para la tabla `app_itemcarrito`
--
ALTER TABLE `app_itemcarrito`
  ADD CONSTRAINT `app_itemcarrito_carrito_id_02f22e19_fk_app_carrito_id` FOREIGN KEY (`carrito_id`) REFERENCES `app_carrito` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `app_itemcarrito_producto_id_4e2f7064_fk_app_libro_id` FOREIGN KEY (`producto_id`) REFERENCES `app_libro` (`id`) ON DELETE CASCADE;

--
-- Filtros para la tabla `app_libro`
--
ALTER TABLE `app_libro`
  ADD CONSTRAINT `app_libro_id_autor_id_5d82464f_fk_app_autor_id` FOREIGN KEY (`id_autor_id`) REFERENCES `app_autor` (`id`),
  ADD CONSTRAINT `app_libro_id_genero_id_59bb8c99_fk_app_generolib_id` FOREIGN KEY (`id_genero_id`) REFERENCES `app_generolib` (`id`);

--
-- Filtros para la tabla `app_libroarr`
--
ALTER TABLE `app_libroarr`
  ADD CONSTRAINT `app_libroarr_id_autor_id_fc2e6e08_fk_app_autor_id` FOREIGN KEY (`id_autor_id`) REFERENCES `app_autor` (`id`),
  ADD CONSTRAINT `app_libroarr_id_genero_id_8e8ecfdd_fk_app_generolib_id` FOREIGN KEY (`id_genero_id`) REFERENCES `app_generolib` (`id`);

--
-- Filtros para la tabla `app_sub`
--
ALTER TABLE `app_sub`
  ADD CONSTRAINT `app_sub_id_ts_id_10c803ad_fk_app_tiposubcripscion_id` FOREIGN KEY (`id_ts_id`) REFERENCES `app_tiposubcripscion` (`id`),
  ADD CONSTRAINT `app_sub_id_us_id_50e92fd2_fk_app_customuser_id` FOREIGN KEY (`id_us_id`) REFERENCES `app_customuser` (`id`) ON DELETE CASCADE;

--
-- Filtros para la tabla `app_usersub`
--
ALTER TABLE `app_usersub`
  ADD CONSTRAINT `app_usersub_id_Sub_id_c5516a41_fk_app_subscripcion_id` FOREIGN KEY (`id_Sub_id`) REFERENCES `app_subscripcion` (`id`),
  ADD CONSTRAINT `app_usersub_id_usuario_id_c4ddb2c4_fk_app_customuser_id` FOREIGN KEY (`id_usuario_id`) REFERENCES `app_customuser` (`id`);

--
-- Filtros para la tabla `auth_group_permissions`
--
ALTER TABLE `auth_group_permissions`
  ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`),
  ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`);

--
-- Filtros para la tabla `auth_permission`
--
ALTER TABLE `auth_permission`
  ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`);

--
-- Filtros para la tabla `django_admin_log`
--
ALTER TABLE `django_admin_log`
  ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`),
  ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_app_customuser_id` FOREIGN KEY (`user_id`) REFERENCES `app_customuser` (`id`) ON DELETE CASCADE;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
